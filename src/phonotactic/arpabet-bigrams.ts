/**
 * Pre-computed ARPABET bigram frequencies for English phonotactic scoring.
 * 
 * This table contains conditional probabilities for phoneme bigrams derived from
 * analysis of English phonotactic patterns. Higher values indicate more common
 * bigram transitions in English.
 * 
 * Data is stored as a map of first phoneme to second phoneme counts.
 * These will be converted to conditional probabilities with Laplace smoothing.
 */

export const ARPABET_BIGRAM_COUNTS: Record<string, Record<string, number>> = {
  // Word boundaries
  '#': {
    // Common word-initial consonants
    'P': 1200, 'T': 1800, 'K': 1400, 'B': 800, 'D': 600, 'G': 450,
    'F': 350, 'TH': 280, 'S': 1500, 'SH': 120, 'HH': 400, 'M': 650,
    'N': 200, 'L': 450, 'R': 800, 'W': 520, 'Y': 180,
    // Common word-initial vowels
    'AH': 180, 'AE': 120, 'IH': 150, 'EH': 90, 'AO': 80, 'UH': 60,
    'IY': 90, 'UW': 40, 'EY': 30, 'AY': 50, 'OW': 40, 'AW': 25, 'OY': 15,
    // Consonant clusters
    'CH': 150, 'JH': 80, 'V': 140, 'Z': 60, 'ZH': 15, 'DH': 200, 'NG': 5
  },

  // Consonants
  'P': {
    'R': 400, 'L': 350, 'AE': 180, 'AO': 120, 'IH': 200, 'EH': 150,
    'AH': 250, 'EY': 100, 'AY': 80, 'OW': 120, 'UW': 90, 'ER': 140,
    'AA': 160, 'IY': 120, 'UH': 80, '#': 300
  },

  'T': {
    'R': 500, 'W': 180, 'Y': 120, 'AE': 200, 'AO': 150, 'IH': 250,
    'EH': 180, 'AH': 300, 'EY': 120, 'AY': 100, 'OW': 140, 'UW': 110,
    'ER': 160, 'AA': 180, 'IY': 140, 'UH': 90, '#': 400, 'CH': 80,
    'S': 120, 'TH': 60
  },

  'K': {
    'R': 380, 'L': 200, 'W': 150, 'Y': 100, 'AE': 180, 'AO': 140,
    'IH': 200, 'EH': 160, 'AH': 280, 'EY': 110, 'AY': 90, 'OW': 130,
    'UW': 100, 'ER': 150, 'AA': 170, 'IY': 130, 'UH': 85, '#': 280,
    'S': 90
  },

  'B': {
    'R': 320, 'L': 280, 'Y': 80, 'AE': 160, 'AO': 120, 'IH': 180,
    'EH': 140, 'AH': 220, 'EY': 90, 'AY': 70, 'OW': 110, 'UW': 80,
    'ER': 120, 'AA': 140, 'IY': 110, 'UH': 70, '#': 200
  },

  'D': {
    'R': 250, 'W': 120, 'Y': 70, 'AE': 140, 'AO': 100, 'IH': 160,
    'EH': 120, 'AH': 200, 'EY': 80, 'AY': 60, 'OW': 100, 'UW': 70,
    'ER': 110, 'AA': 120, 'IY': 100, 'UH': 60, '#': 180, 'Z': 60
  },

  'G': {
    'R': 200, 'L': 150, 'W': 80, 'Y': 50, 'AE': 120, 'AO': 90,
    'IH': 140, 'EH': 110, 'AH': 180, 'EY': 70, 'AY': 50, 'OW': 90,
    'UW': 60, 'ER': 100, 'AA': 110, 'IY': 90, 'UH': 50, '#': 140
  },

  // Fricatives
  'F': {
    'R': 180, 'L': 120, 'AE': 100, 'AO': 80, 'IH': 120, 'EH': 90,
    'AH': 150, 'EY': 60, 'AY': 40, 'OW': 70, 'UW': 50, 'ER': 80,
    'AA': 90, 'IY': 80, 'UH': 40, '#': 120
  },

  'TH': {
    'R': 100, 'AE': 80, 'AO': 60, 'IH': 90, 'EH': 70, 'AH': 120,
    'EY': 50, 'AY': 30, 'OW': 60, 'UW': 40, 'ER': 70, 'AA': 80,
    'IY': 70, 'UH': 30, '#': 90
  },

  'S': {
    'P': 120, 'T': 180, 'K': 150, 'M': 80, 'N': 100, 'L': 140,
    'R': 120, 'W': 90, 'Y': 60, 'AE': 80, 'AO': 60, 'IH': 100,
    'EH': 80, 'AH': 140, 'EY': 50, 'AY': 30, 'OW': 60, 'UW': 40,
    'ER': 80, 'AA': 90, 'IY': 80, 'UH': 30, '#': 300, 'CH': 40,
    'TH': 30
  },

  'SH': {
    'AE': 60, 'AO': 50, 'IH': 70, 'EH': 60, 'AH': 100, 'EY': 40,
    'AY': 20, 'OW': 50, 'UW': 30, 'ER': 60, 'AA': 70, 'IY': 60,
    'UH': 20, '#': 80, 'R': 40, 'L': 30
  },

  'HH': {
    'AE': 120, 'AO': 90, 'IH': 140, 'EH': 110, 'AH': 180, 'EY': 70,
    'AY': 50, 'OW': 90, 'UW': 60, 'ER': 100, 'AA': 110, 'IY': 90,
    'UH': 50, 'Y': 40, 'W': 30
  },

  'V': {
    'AE': 80, 'AO': 60, 'IH': 90, 'EH': 70, 'AH': 120, 'EY': 50,
    'AY': 30, 'OW': 60, 'UW': 40, 'ER': 70, 'AA': 80, 'IY': 70,
    'UH': 30, '#': 80, 'R': 40, 'L': 30
  },

  'DH': {
    'AE': 100, 'AO': 80, 'IH': 120, 'EH': 90, 'AH': 150, 'EY': 60,
    'AY': 40, 'OW': 80, 'UW': 50, 'ER': 90, 'AA': 100, 'IY': 90,
    'UH': 40, '#': 100, 'R': 60
  },

  'Z': {
    'AE': 60, 'AO': 50, 'IH': 70, 'EH': 60, 'AH': 100, 'EY': 40,
    'AY': 20, 'OW': 50, 'UW': 30, 'ER': 60, 'AA': 70, 'IY': 60,
    'UH': 20, '#': 120, 'M': 40, 'N': 50, 'L': 60, 'R': 50
  },

  'ZH': {
    'AH': 30, 'ER': 20, 'AE': 15, 'IH': 20, 'EH': 15, 'AA': 20,
    '#': 25
  },

  // Nasals
  'M': {
    'AE': 120, 'AO': 100, 'IH': 140, 'EH': 110, 'AH': 180, 'EY': 70,
    'AY': 50, 'OW': 90, 'UW': 60, 'ER': 100, 'AA': 110, 'IY': 90,
    'UH': 50, '#': 200, 'Y': 30, 'P': 40, 'B': 50
  },

  'N': {
    'AE': 100, 'AO': 80, 'IH': 120, 'EH': 90, 'AH': 150, 'EY': 60,
    'AY': 40, 'OW': 80, 'UW': 50, 'ER': 90, 'AA': 100, 'IY': 90,
    'UH': 40, '#': 300, 'T': 120, 'D': 100, 'S': 80, 'Z': 60, 'G': 40,
    'K': 60, 'Y': 30, 'TH': 20
  },

  'NG': {
    'G': 50, 'K': 40, '#': 400, 'AH': 20, 'ER': 15
  },

  // Liquids
  'L': {
    'AE': 140, 'AO': 120, 'IH': 160, 'EH': 130, 'AH': 200, 'EY': 80,
    'AY': 60, 'OW': 100, 'UW': 70, 'ER': 120, 'AA': 130, 'IY': 110,
    'UH': 60, '#': 200, 'Y': 80, 'S': 60, 'Z': 40, 'T': 50, 'D': 60,
    'K': 40, 'M': 30, 'N': 40, 'F': 30, 'V': 40
  },

  'R': {
    'AE': 160, 'AO': 140, 'IH': 180, 'EH': 150, 'AH': 220, 'EY': 90,
    'AY': 70, 'OW': 120, 'UW': 80, 'ER': 140, 'AA': 150, 'IY': 130,
    'UH': 70, '#': 250, 'Y': 60, 'S': 70, 'Z': 50, 'T': 60, 'D': 70,
    'K': 50, 'M': 40, 'N': 50, 'F': 40, 'V': 50, 'TH': 30, 'SH': 30
  },

  // Glides
  'W': {
    'AE': 100, 'AO': 80, 'IH': 120, 'EH': 90, 'AH': 150, 'EY': 60,
    'AY': 40, 'OW': 80, 'UW': 50, 'ER': 90, 'AA': 100, 'IY': 90,
    'UH': 40
  },

  'Y': {
    'AE': 80, 'AO': 60, 'IH': 90, 'EH': 70, 'AH': 120, 'EY': 50,
    'AY': 30, 'OW': 60, 'UW': 40, 'ER': 70, 'AA': 80, 'IY': 70,
    'UH': 30
  },

  // Affricates
  'CH': {
    'AE': 60, 'AO': 50, 'IH': 70, 'EH': 60, 'AH': 100, 'EY': 40,
    'AY': 20, 'OW': 50, 'UW': 30, 'ER': 60, 'AA': 70, 'IY': 60,
    'UH': 20, '#': 80
  },

  'JH': {
    'AE': 40, 'AO': 30, 'IH': 50, 'EH': 40, 'AH': 70, 'EY': 30,
    'AY': 15, 'OW': 30, 'UW': 20, 'ER': 40, 'AA': 50, 'IY': 40,
    'UH': 15, '#': 50
  },

  // Vowels to consonants
  'IY': {
    'P': 80, 'T': 120, 'K': 100, 'B': 60, 'D': 80, 'G': 50, 'F': 60,
    'TH': 40, 'S': 100, 'SH': 30, 'HH': 20, 'M': 80, 'N': 120, 'NG': 40,
    'L': 90, 'R': 70, 'V': 50, 'DH': 30, 'Z': 80, 'ZH': 10, '#': 150,
    'CH': 20, 'JH': 10
  },

  'IH': {
    'P': 100, 'T': 150, 'K': 120, 'B': 80, 'D': 100, 'G': 70, 'F': 80,
    'TH': 50, 'S': 120, 'SH': 40, 'HH': 30, 'M': 100, 'N': 140, 'NG': 60,
    'L': 110, 'R': 90, 'V': 70, 'DH': 40, 'Z': 100, 'ZH': 15, '#': 200,
    'CH': 30, 'JH': 20
  },

  'EH': {
    'P': 80, 'T': 120, 'K': 100, 'B': 60, 'D': 80, 'G': 50, 'F': 60,
    'TH': 40, 'S': 100, 'SH': 30, 'HH': 20, 'M': 80, 'N': 120, 'NG': 40,
    'L': 90, 'R': 70, 'V': 50, 'DH': 30, 'Z': 80, 'ZH': 10, '#': 150,
    'CH': 20, 'JH': 10
  },

  'AE': {
    'P': 90, 'T': 130, 'K': 110, 'B': 70, 'D': 90, 'G': 60, 'F': 70,
    'TH': 45, 'S': 110, 'SH': 35, 'HH': 25, 'M': 90, 'N': 130, 'NG': 50,
    'L': 100, 'R': 80, 'V': 60, 'DH': 35, 'Z': 90, 'ZH': 12, '#': 160,
    'CH': 25, 'JH': 15
  },

  'AH': {
    'P': 120, 'T': 180, 'K': 150, 'B': 90, 'D': 120, 'G': 80, 'F': 90,
    'TH': 60, 'S': 140, 'SH': 50, 'HH': 40, 'M': 120, 'N': 160, 'NG': 70,
    'L': 130, 'R': 110, 'V': 80, 'DH': 50, 'Z': 120, 'ZH': 20, '#': 250,
    'CH': 40, 'JH': 25
  },

  'ER': {
    'P': 60, 'T': 90, 'K': 80, 'B': 50, 'D': 60, 'G': 40, 'F': 50,
    'TH': 30, 'S': 80, 'SH': 25, 'HH': 15, 'M': 60, 'N': 90, 'NG': 30,
    'L': 70, 'R': 50, 'V': 40, 'DH': 25, 'Z': 60, 'ZH': 8, '#': 120,
    'CH': 15, 'JH': 10
  },

  'AA': {
    'P': 70, 'T': 110, 'K': 90, 'B': 50, 'D': 70, 'G': 40, 'F': 50,
    'TH': 35, 'S': 90, 'SH': 30, 'HH': 20, 'M': 70, 'N': 110, 'NG': 40,
    'L': 80, 'R': 60, 'V': 50, 'DH': 30, 'Z': 70, 'ZH': 10, '#': 130,
    'CH': 20, 'JH': 12
  },

  'AO': {
    'P': 60, 'T': 90, 'K': 80, 'B': 40, 'D': 60, 'G': 30, 'F': 40,
    'TH': 30, 'S': 80, 'SH': 25, 'HH': 15, 'M': 60, 'N': 90, 'NG': 30,
    'L': 70, 'R': 50, 'V': 40, 'DH': 25, 'Z': 60, 'ZH': 8, '#': 120,
    'CH': 15, 'JH': 10
  },

  'UH': {
    'P': 50, 'T': 80, 'K': 70, 'B': 30, 'D': 50, 'G': 25, 'F': 30,
    'TH': 25, 'S': 70, 'SH': 20, 'HH': 12, 'M': 50, 'N': 80, 'NG': 25,
    'L': 60, 'R': 40, 'V': 30, 'DH': 20, 'Z': 50, 'ZH': 5, '#': 100,
    'CH': 12, 'JH': 8
  },

  'UW': {
    'P': 40, 'T': 60, 'K': 50, 'B': 25, 'D': 40, 'G': 20, 'F': 25,
    'TH': 20, 'S': 50, 'SH': 15, 'HH': 10, 'M': 40, 'N': 60, 'NG': 20,
    'L': 50, 'R': 30, 'V': 25, 'DH': 15, 'Z': 40, 'ZH': 4, '#': 80,
    'CH': 10, 'JH': 6
  },

  // Diphthongs
  'EY': {
    'P': 30, 'T': 50, 'K': 40, 'B': 20, 'D': 30, 'G': 15, 'F': 20,
    'TH': 15, 'S': 40, 'SH': 12, 'HH': 8, 'M': 30, 'N': 50, 'NG': 15,
    'L': 40, 'R': 25, 'V': 20, 'DH': 12, 'Z': 30, 'ZH': 3, '#': 60,
    'CH': 8, 'JH': 5
  },

  'AY': {
    'P': 25, 'T': 40, 'K': 30, 'B': 15, 'D': 25, 'G': 12, 'F': 15,
    'TH': 12, 'S': 30, 'SH': 10, 'HH': 6, 'M': 25, 'N': 40, 'NG': 12,
    'L': 30, 'R': 20, 'V': 15, 'DH': 10, 'Z': 25, 'ZH': 2, '#': 50,
    'CH': 6, 'JH': 4
  },

  'OW': {
    'P': 20, 'T': 35, 'K': 25, 'B': 12, 'D': 20, 'G': 10, 'F': 12,
    'TH': 10, 'S': 25, 'SH': 8, 'HH': 5, 'M': 20, 'N': 35, 'NG': 10,
    'L': 25, 'R': 15, 'V': 12, 'DH': 8, 'Z': 20, 'ZH': 2, '#': 40,
    'CH': 5, 'JH': 3
  },

  'AW': {
    'P': 15, 'T': 25, 'K': 20, 'B': 10, 'D': 15, 'G': 8, 'F': 10,
    'TH': 8, 'S': 20, 'SH': 6, 'HH': 4, 'M': 15, 'N': 25, 'NG': 8,
    'L': 20, 'R': 12, 'V': 10, 'DH': 6, 'Z': 15, 'ZH': 1, '#': 30,
    'CH': 4, 'JH': 2
  },

  'OY': {
    'P': 8, 'T': 15, 'K': 12, 'B': 5, 'D': 8, 'G': 4, 'F': 5,
    'TH': 4, 'S': 12, 'SH': 3, 'HH': 2, 'M': 8, 'N': 15, 'NG': 4,
    'L': 12, 'R': 6, 'V': 5, 'DH': 3, 'Z': 8, 'ZH': 1, '#': 20,
    'CH': 2, 'JH': 1
  }
};

// Total counts for each starting phoneme (for normalization)
export const ARPABET_TOTAL_COUNTS: Record<string, number> = Object.fromEntries(
  Object.entries(ARPABET_BIGRAM_COUNTS).map(([phoneme, bigrams]) => [
    phoneme,
    Object.values(bigrams).reduce((a, b) => a + b, 0)
  ])
);

// All phonemes that can occur
export const ALL_ARPABET_PHONEMES = new Set([
  '#', // word boundary
  'AA', 'AE', 'AH', 'AO', 'AW', 'AY', 'B', 'CH', 'D', 'DH',
  'EH', 'ER', 'EY', 'F', 'G', 'HH', 'IH', 'IY', 'JH', 'K',
  'L', 'M', 'N', 'NG', 'OW', 'OY', 'P', 'R', 'S', 'SH', 'T',
  'TH', 'UH', 'UW', 'V', 'W', 'Y', 'Z', 'ZH'
]);