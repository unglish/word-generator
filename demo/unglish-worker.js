function X(e,o){switch(o){case"onset":return e.onset;case"nucleus":return e.nucleus;case"coda":return e.coda}}const ee=(()=>{let e=Date.now();return()=>(e^=e<<13,e^=e>>17,e^=e<<5,(e>>>0)/2**32)})(),P=ee;let j=P;const x=()=>j,I=e=>{j=e},oe=()=>{j=P},re=Object.freeze(Object.defineProperty({__proto__:null,getRand:x,overrideRand:I,resetRand:oe},Symbol.toStringTag,{value:"Module"})),ne=e=>{let o=e;return()=>(o=Math.sin(o)*1e4,o-Math.floor(o))},u=e=>{const o=e.reduce((t,[d,i])=>t+i,0),r=x()()*o;let n=0;for(const[t,d]of e)if(n+=d,r<n)return t;return e[e.length-1][0]};function te(e){const o=new Set(e.phonemes);for(const t of["onset","nucleus","coda"])for(const[d,i]of e.phonemeMaps[t])for(const s of i)if(!o.has(s))throw new Error(`phonemeMaps.${t} contains phoneme "${s.sound}" (key "${d}") not found in phonemes[]`);const r=new Set(e.graphemes);for(const t of["onset","nucleus","coda"])for(const[d,i]of e.graphemeMaps[t])for(const s of i)if(!r.has(s))throw new Error(`graphemeMaps.${t} contains grapheme "${s.form}" (key "${d}") not found in graphemes[]`);const{probability:n}=e.generationWeights;for(const[t,d]of Object.entries(n))if(d<0||d>100)throw new Error(`generationWeights.probability.${t} is ${d}, must be in [0, 100]`)}function de(e){const{mannerOfArticulation:o,placeOfArticulation:r,voicedBonus:n,tenseBonus:t}=e.sonorityHierarchy;return new Map(e.phonemes.map(d=>[d,(o[d.mannerOfArticulation]??0)+(r[d.placeOfArticulation]??0)+(d.voiced?n:0)+(d.tense?t:0)]))}const B=.5,U=.25,ie=[[1,5e3],[2,3e4],[3,29700],[4,3e3],[5,200],[6,50],[7,5]],se=[[0,50],[1,100],[2,200],[3,150]],ae=[[0,0],[1,675],[2,125],[3,80]],le=[[0,150],[1,675],[2,125],[3,80]],ce={0:[[0,20],[1,100],[2,200],[3,150]],1:[[0,80],[1,150],[2,150],[3,100]],2:[[0,50],[1,200],[2,100],[3,50]],3:[[0,100],[1,300],[2,50],[3,20]]},ue=[[0,150],[1,200],[2,30],[3,10]],fe=1200,me=6e3,We=[[1,3e3],[2,900],[3,100]],pe=15,he=90,ge=95,ye=80,be=80,qe=90,Oe=30,G={highVowel:9,midVowel:8.5,lowVowel:8,glide:7,liquid:6,nasal:5,lateralApproximant:4.5,sibilant:4,fricative:3,affricate:2,stop:1},T={front:.25,central:0,back:-.25,bilabial:-.5,labiodental:-.3,dental:-.2,alveolar:0,velar:.1,postalveolar:.2,"labial-velar":.2,palatal:.3,glottal:.5},we={front:9,central:5,back:2,bilabial:8,labiodental:7,dental:6,alveolar:5,postalveolar:4,palatal:3,"labial-velar":4,velar:2,glottal:1},V=[{sound:"i:",mannerOfArticulation:"highVowel",tense:!0,nucleus:150,startWord:3,midWord:1,endWord:4,voiced:!0,placeOfArticulation:"front"},{sound:"ɪ",mannerOfArticulation:"highVowel",tense:!1,nucleus:230,startWord:3,midWord:8,endWord:1,voiced:!0,placeOfArticulation:"front"},{sound:"e",mannerOfArticulation:"midVowel",tense:!1,nucleus:140,startWord:8,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"front"},{sound:"ɛ",mannerOfArticulation:"midVowel",tense:!1,nucleus:280,startWord:8,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"front"},{sound:"ə",mannerOfArticulation:"midVowel",tense:!1,nucleus:280,startWord:4,midWord:8,endWord:1,voiced:!0,placeOfArticulation:"central"},{sound:"ɜ",mannerOfArticulation:"midVowel",tense:!1,nucleus:50,startWord:4,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"central"},{sound:"ɚ",mannerOfArticulation:"midVowel",tense:!1,nucleus:90,startWord:1,midWord:2,endWord:5,voiced:!0,placeOfArticulation:"central"},{sound:"æ",mannerOfArticulation:"lowVowel",tense:!1,nucleus:220,startWord:8,midWord:6,endWord:1,voiced:!0,placeOfArticulation:"front"},{sound:"ɑ",mannerOfArticulation:"lowVowel",tense:!0,nucleus:150,startWord:6,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"back"},{sound:"ɔ",mannerOfArticulation:"lowVowel",tense:!0,nucleus:180,startWord:6,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"back"},{sound:"o",mannerOfArticulation:"lowVowel",tense:!0,nucleus:100,startWord:6,midWord:2,endWord:2,voiced:!0,placeOfArticulation:"back"},{sound:"ʊ",mannerOfArticulation:"highVowel",tense:!0,nucleus:70,startWord:4,midWord:2,endWord:0,voiced:!0,placeOfArticulation:"back"},{sound:"u",mannerOfArticulation:"highVowel",tense:!0,nucleus:80,startWord:8,midWord:2,endWord:2,voiced:!0,placeOfArticulation:"back"},{sound:"ʌ",mannerOfArticulation:"midVowel",tense:!1,nucleus:220,startWord:4,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"central"},{sound:"eɪ",mannerOfArticulation:"midVowel",tense:!0,nucleus:170,startWord:6,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"front"},{sound:"ɪə",mannerOfArticulation:"midVowel",tense:!0,nucleus:30,startWord:4,midWord:2,endWord:4,voiced:!0,placeOfArticulation:"central"},{sound:"eə",mannerOfArticulation:"midVowel",tense:!0,nucleus:20,startWord:4,midWord:2,endWord:0,voiced:!0,placeOfArticulation:"central"},{sound:"aɪ",mannerOfArticulation:"midVowel",tense:!0,nucleus:150,startWord:6,midWord:2,endWord:3,voiced:!0,placeOfArticulation:"front"},{sound:"ʊə",mannerOfArticulation:"midVowel",tense:!0,nucleus:10,startWord:6,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"əʊ",mannerOfArticulation:"midVowel",tense:!0,nucleus:80,startWord:1,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"back"},{sound:"ɔɪ",mannerOfArticulation:"midVowel",tense:!0,nucleus:20,startWord:4,midWord:2,endWord:4,voiced:!0,placeOfArticulation:"front"},{sound:"aʊ",mannerOfArticulation:"midVowel",tense:!0,nucleus:20,startWord:1,midWord:1,endWord:6,voiced:!0,placeOfArticulation:"back"},{sound:"aɪə",mannerOfArticulation:"lowVowel",tense:!0,nucleus:80,startWord:1,midWord:1,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"aʊə",mannerOfArticulation:"lowVowel",tense:!0,nucleus:60,startWord:1,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"eɪə",mannerOfArticulation:"midVowel",tense:!0,nucleus:50,startWord:0,midWord:1,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"ɔɪə",mannerOfArticulation:"midVowel",tense:!0,nucleus:40,startWord:0,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"əʊə",mannerOfArticulation:"midVowel",tense:!0,nucleus:30,startWord:1,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"j",mannerOfArticulation:"glide",onset:10,coda:20,startWord:6,midWord:2,endWord:2,voiced:!0,placeOfArticulation:"palatal"},{sound:"w",mannerOfArticulation:"glide",onset:120,coda:10,startWord:10,midWord:2,endWord:2,voiced:!0,placeOfArticulation:"labial-velar"},{sound:"l",mannerOfArticulation:"liquid",onset:200,coda:200,startWord:8,midWord:5,endWord:8,voiced:!0,placeOfArticulation:"alveolar"},{sound:"r",mannerOfArticulation:"liquid",onset:500,coda:100,startWord:8,midWord:2,endWord:8,voiced:!0,placeOfArticulation:"postalveolar"},{sound:"m",mannerOfArticulation:"nasal",onset:100,coda:176,startWord:6,midWord:2,endWord:8,voiced:!0,placeOfArticulation:"bilabial"},{sound:"n",mannerOfArticulation:"nasal",onset:350,coda:350,startWord:8,midWord:2,endWord:10,voiced:!0,placeOfArticulation:"alveolar"},{sound:"ŋ",mannerOfArticulation:"nasal",onset:0,coda:200,startWord:0,midWord:2,endWord:30,voiced:!0,placeOfArticulation:"velar"},{sound:"f",mannerOfArticulation:"fricative",onset:100,coda:100,startWord:6,midWord:2,endWord:4,voiced:!1,placeOfArticulation:"labiodental"},{sound:"θ",mannerOfArticulation:"fricative",onset:50,coda:50,startWord:4,midWord:2,endWord:4,voiced:!1,placeOfArticulation:"dental"},{sound:"h",mannerOfArticulation:"fricative",onset:180,coda:0,startWord:10,midWord:2,endWord:0,voiced:!1,placeOfArticulation:"glottal"},{sound:"v",mannerOfArticulation:"fricative",onset:250,coda:20,startWord:6,midWord:2,endWord:8,voiced:!0,placeOfArticulation:"labiodental"},{sound:"ð",mannerOfArticulation:"fricative",onset:250,coda:50,startWord:6,midWord:2,endWord:4,voiced:!0,placeOfArticulation:"dental"},{sound:"z",mannerOfArticulation:"sibilant",onset:5,coda:50,startWord:4,midWord:4,endWord:4,voiced:!0,placeOfArticulation:"alveolar"},{sound:"ʒ",mannerOfArticulation:"sibilant",onset:5,coda:3,startWord:0,midWord:6,endWord:0,voiced:!0,placeOfArticulation:"postalveolar"},{sound:"s",mannerOfArticulation:"sibilant",onset:200,coda:100,startWord:10,midWord:2,endWord:10,voiced:!1,placeOfArticulation:"alveolar"},{sound:"ʃ",mannerOfArticulation:"sibilant",onset:35,coda:80,startWord:4,midWord:1,endWord:5,voiced:!1,placeOfArticulation:"postalveolar"},{sound:"tʃ",voiced:!1,placeOfArticulation:"postalveolar",mannerOfArticulation:"affricate",onset:40,coda:8990,startWord:4,midWord:2,endWord:2},{sound:"dʒ",voiced:!0,placeOfArticulation:"postalveolar",mannerOfArticulation:"affricate",onset:30,coda:20,startWord:4,midWord:2,endWord:2},{sound:"p",voiced:!1,placeOfArticulation:"bilabial",mannerOfArticulation:"stop",onset:165,coda:50,startWord:8,midWord:10,endWord:6},{sound:"t",voiced:!1,placeOfArticulation:"alveolar",mannerOfArticulation:"stop",onset:350,coda:350,startWord:10,midWord:10,endWord:10},{sound:"k",voiced:!1,placeOfArticulation:"velar",mannerOfArticulation:"stop",onset:320,coda:100,startWord:14,midWord:10,endWord:10},{sound:"b",voiced:!0,placeOfArticulation:"bilabial",mannerOfArticulation:"stop",onset:210,coda:100,startWord:8,midWord:4,endWord:4},{sound:"d",voiced:!0,placeOfArticulation:"alveolar",mannerOfArticulation:"stop",onset:210,coda:210,startWord:8,midWord:4,endWord:8},{sound:"g",voiced:!0,placeOfArticulation:"velar",mannerOfArticulation:"stop",onset:150,coda:100,startWord:6,midWord:4,endWord:4}],_={onset:new Map,nucleus:new Map,coda:new Map};for(const e of["onset","nucleus","coda"])for(const o of V)o[e]!==void 0&&o[e]>0&&(_[e].has(o.sound)||_[e].set(o.sound,[]),_[e].get(o.sound).push(o));const ve=new Map(V.map(e=>[e,G[e.mannerOfArticulation]+(T[e.placeOfArticulation]??0)+(e.voiced?B:0)+(e.tense?U:0)])),z=[/rɜ/,/ɜr/,/ʃh/,/sʃ/,/ʒs/],Y=[...z,/fn/,/t[ðn]/,/[θð]n/,/mw/,/k[nbf]/,/d[tpnmg]/,/pb/,/[ʒl]r/,/^.*.?[ðŋhʃ].?.*$/],Z=[...Y,/^[wrlvznmjhʃ].{1,2}/,/^.[wzgdbθhvʃsf]/,/[^s]k/,/t[θd]/,/dl/,/dʒ./,/pn/,/^sr/],J=[...Y,/vsk$/,/.?[kθð](?![szd])$/,/lv(?![zd])$/,/[fʃ](?![zdt])/,/m[tvg]/,/[vlstd]g/,/.*sp/,/t[pb]/,/pk/,/n[bmp]/,/td/,/nzt/,/lnd/,/dʒt/,/sn/,/.*.?v$/,/.*.?mp$/,/.*.?b$/,/.*?[jw]$/,/[szʒ]l$/,/[wðf]r$/,/[θðf]rl$/],Ae=Object.freeze(Object.defineProperty({__proto__:null,forwardnessToPlaceOfArticulation:we,invalidBoundaryClusters:z,invalidCodaClusters:J,invalidOnsetClusters:Z,phonemeMaps:_,phonemes:V,sonorityLevels:ve,sonorityToMannerOfArticulation:G,sonorityToPlaceOfArticulation:T},Symbol.toStringTag,{value:"Module"})),Ce=[{phoneme:"i:",form:"ee",origin:0,frequency:50,startWord:0,midWord:4,endWord:1},{phoneme:"i:",form:"ea",origin:0,frequency:50,startWord:20,midWord:3,endWord:1},{phoneme:"i:",form:"e",origin:0,frequency:1,startWord:100,midWord:1,endWord:0},{phoneme:"i:",form:"y",origin:1,frequency:1,startWord:0,midWord:1,endWord:100},{phoneme:"i:",form:"ie",origin:0,frequency:2,startWord:0,midWord:5,endWord:2},{phoneme:"i:",form:"ei",origin:0,frequency:2,startWord:10,midWord:1,endWord:0},{phoneme:"i:",form:"eo",origin:1,frequency:1,startWord:0,midWord:1,endWord:0},{phoneme:"ɪ",form:"i",origin:0,frequency:1e3,startWord:5,midWord:10,endWord:.01},{phoneme:"ɪ",form:"y",origin:1,frequency:1,startWord:0,midWord:1,endWord:0},{phoneme:"ɪ",form:"ui",origin:1,frequency:1,startWord:0,midWord:1,endWord:0},{phoneme:"e",form:"e",origin:0,frequency:250,startWord:1,midWord:1,endWord:1},{phoneme:"e",form:"ea",origin:0,frequency:10,startWord:0,midWord:1,endWord:0},{phoneme:"e",form:"ai",origin:0,frequency:5,startWord:0,midWord:1,endWord:0},{phoneme:"e",form:"ie",origin:0,frequency:3,startWord:0,midWord:1,endWord:0},{phoneme:"ɛ",form:"e",origin:0,frequency:1e3,startWord:10,midWord:10,endWord:5},{phoneme:"ɛ",form:"ea",origin:0,frequency:10,onset:0,startWord:0,midWord:10,endWord:5},{phoneme:"æ",form:"a",origin:0,frequency:10,startWord:10,midWord:10,endWord:5},{phoneme:"ɑ",form:"a",origin:0,frequency:1e3,startWord:10,midWord:10,endWord:5},{phoneme:"ɑ",form:"ah",origin:4,frequency:10,startWord:0,midWord:5,endWord:10},{phoneme:"ɑ",form:"aa",origin:4,frequency:1,startWord:1,midWord:1,endWord:0},{phoneme:"ɑ",form:"au",origin:0,frequency:40,startWord:1,midWord:10,endWord:0},{phoneme:"ɑ",form:"aue",origin:0,frequency:40,startWord:1,midWord:10,endWord:10},{phoneme:"ɔ",form:"o",origin:0,frequency:10,startWord:10,midWord:10,endWord:5},{phoneme:"ɔ",form:"aw",origin:0,frequency:1,onset:0,startWord:0,midWord:1,endWord:2},{phoneme:"o",form:"o",origin:0,frequency:100,startWord:10,midWord:10,endWord:1},{phoneme:"o",form:"oa",origin:0,frequency:100,startWord:1,midWord:10,endWord:0},{phoneme:"o",form:"ow",origin:0,frequency:2,startWord:0,midWord:2,endWord:10},{phoneme:"o",form:"oe",origin:0,frequency:40,startWord:0,midWord:0,endWord:3},{phoneme:"o",form:"ough",origin:4,frequency:1,onset:0,startWord:0,midWord:0,endWord:0},{phoneme:"o",form:"ew",origin:0,frequency:1,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"ʊ",form:"oo",origin:0,frequency:10,onset:0,startWord:0,midWord:2,endWord:2},{phoneme:"ʊ",form:"u",origin:0,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"u",form:"ou",origin:1,frequency:2,startWord:0,midWord:10,endWord:0},{phoneme:"u",form:"oo",origin:0,frequency:10,startWord:0,midWord:1,endWord:1},{phoneme:"u",form:"u",origin:0,frequency:10,startWord:10,midWord:10,endWord:2},{phoneme:"u",form:"ue",origin:0,frequency:10,startWord:0,midWord:5,endWord:50},{phoneme:"u",form:"ew",origin:0,frequency:10,startWord:1,midWord:5,endWord:30},{phoneme:"ʌ",form:"u",origin:0,frequency:1e3,startWord:1,midWord:1,endWord:0},{phoneme:"ʌ",form:"uh",origin:0,frequency:30,startWord:1,midWord:4,endWord:1},{phoneme:"ə",form:"e",origin:0,frequency:500,startWord:5,midWord:10,endWord:1},{phoneme:"ə",form:"a",origin:0,frequency:4,startWord:1e3,midWord:5,endWord:9},{phoneme:"ə",form:"o",origin:0,frequency:1,startWord:1,midWord:5,endWord:1},{phoneme:"ə",form:"ou",origin:0,frequency:1,startWord:1,midWord:1,endWord:1},{phoneme:"ə",form:"u",origin:0,frequency:10,startWord:5,midWord:10,endWord:0}],Se=[{phoneme:"aɪ",form:"i",origin:3,frequency:10,startWord:1,midWord:10,endWord:10},{phoneme:"aɪ",form:"igh",origin:0,frequency:10,startWord:0,midWord:10,endWord:10,condition:{rightContext:["t"],wordPosition:["final"]}},{phoneme:"aɪ",form:"y",origin:0,frequency:1,startWord:0,midWord:1,endWord:50},{phoneme:"aɪ",form:"ie",origin:1,frequency:10,startWord:10,midWord:10,endWord:1},{phoneme:"aɪ",form:"ai",origin:3,frequency:1,startWord:0,midWord:1,endWord:0},{phoneme:"aɪ",form:"is",origin:0,frequency:1,startWord:1,midWord:0,endWord:0},{phoneme:"aɪ",form:"ye",origin:0,frequency:10,onset:0,startWord:0,midWord:5,endWord:10},{phoneme:"ʊə",form:"ue",origin:0,frequency:50,startWord:4,midWord:3,endWord:100},{phoneme:"ʊə",form:"ou",origin:0,frequency:30,startWord:3,midWord:2,endWord:100},{phoneme:"ʊə",form:"ue",origin:0,frequency:20,startWord:2,midWord:3,endWord:80},{phoneme:"ʊə",form:"oo",origin:0,frequency:10,startWord:2,midWord:2,endWord:100},{phoneme:"aʊ",form:"ow",origin:0,frequency:100,startWord:1,midWord:5,endWord:10},{phoneme:"aʊ",form:"ou",origin:1,frequency:10,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɔɪ",form:"oi",origin:3,frequency:10,coda:0,startWord:5,midWord:10,endWord:1},{phoneme:"ɔɪ",form:"oy",origin:0,frequency:2,onset:0,startWord:0,midWord:5,endWord:100},{phoneme:"eə",form:"ai",origin:0,frequency:50,startWord:4,midWord:5,endWord:100},{phoneme:"eə",form:"ae",origin:0,frequency:40,startWord:4,midWord:4,endWord:100},{phoneme:"eə",form:"ea",origin:0,frequency:30,startWord:4,midWord:3,endWord:100},{phoneme:"eə",form:"ei",origin:0,frequency:10,startWord:3,midWord:2,endWord:50},{phoneme:"eə",form:"ee",origin:0,frequency:20,startWord:0,midWord:3,endWord:80},{phoneme:"eə",form:"aye",origin:0,frequency:5,startWord:3,midWord:1,endWord:50},{phoneme:"ɪə",form:"ea",origin:0,frequency:10,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɪə",form:"ee",origin:0,frequency:10,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɪə",form:"ie",origin:1,frequency:10,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"eɪ",form:"a",origin:0,frequency:10,startWord:10,midWord:0,endWord:0},{phoneme:"eɪ",form:"ai",origin:3,frequency:10,coda:0,startWord:0,midWord:2,endWord:0},{phoneme:"eɪ",form:"ay",origin:0,frequency:10,onset:0,startWord:0,midWord:1,endWord:100},{phoneme:"eɪ",form:"eigh",origin:1,frequency:1,onset:0,startWord:0,midWord:4,endWord:10},{phoneme:"eɪ",form:"ea",origin:0,frequency:5,startWord:0,midWord:1,endWord:0},{phoneme:"eɪ",form:"ey",origin:0,frequency:10,startWord:0,midWord:0,endWord:1},{phoneme:"eɪ",form:"ae",origin:3,frequency:2,startWord:1,midWord:1,endWord:0},{phoneme:"əʊ",form:"ow",origin:0,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"əʊ",form:"ou",origin:1,frequency:10,startWord:0,midWord:1,endWord:0},{phoneme:"əʊ",form:"oe",origin:1,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"əʊ",form:"ough",origin:4,frequency:1,onset:0,startWord:0,midWord:0,endWord:0}],Me=[{phoneme:"ɜ",form:"e",origin:0,frequency:100,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɜ",form:"ai",origin:0,frequency:50,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɚ",form:"er",origin:0,frequency:300,startWord:1,midWord:50,endWord:100},{phoneme:"ɚ",form:"ur",origin:0,frequency:100,startWord:10,midWord:30,endWord:80},{phoneme:"ɚ",form:"or",origin:3,frequency:300,startWord:0,midWord:20,endWord:50},{phoneme:"ɚ",form:"ar",origin:3,frequency:80,startWord:1,midWord:10,endWord:40},{phoneme:"ɚ",form:"re",origin:1,frequency:50,startWord:0,midWord:5,endWord:100},{phoneme:"ɚ",form:"ure",origin:3,frequency:30,startWord:0,midWord:10,endWord:80}],_e=[{phoneme:"j",form:"y",origin:0,frequency:30,startWord:1,midWord:1,endWord:1},{phoneme:"j",form:"i",origin:3,frequency:1,startWord:1,midWord:1,endWord:1},{phoneme:"j",form:"j",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:0},{phoneme:"w",form:"w",origin:0,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"w",form:"wh",origin:0,coda:0,frequency:100,startWord:1,midWord:1,endWord:0,condition:{wordPosition:["initial"]}}],Le=[{phoneme:"l",form:"l",origin:3,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"r",form:"r",origin:3,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"r",form:"wr",origin:0,frequency:1,coda:0,cluster:0,startWord:1,midWord:1,endWord:0,condition:{wordPosition:["initial"]}},{phoneme:"r",form:"rh",origin:2,frequency:1,coda:0,cluster:0,startWord:30,midWord:1,endWord:0}],xe=[{phoneme:"m",form:"m",origin:3,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"m",form:"mb",origin:5,frequency:2,onset:0,cluster:0,startWord:0,midWord:1,endWord:1,condition:{wordPosition:["final"]}},{phoneme:"m",form:"mn",origin:2,frequency:1,onset:0,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"m",form:"lm",origin:3,frequency:2,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"n",form:"n",origin:3,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"n",form:"mn",origin:2,frequency:1,coda:0,cluster:0,startWord:1,midWord:0,endWord:0},{phoneme:"n",form:"kn",origin:0,frequency:10,coda:0,cluster:0,startWord:1,midWord:1,endWord:0,condition:{wordPosition:["initial"]}},{phoneme:"n",form:"gn",origin:0,frequency:5,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"n",form:"pn",origin:2,frequency:1,coda:0,startWord:1,midWord:0,endWord:0},{phoneme:"ŋ",form:"ng",origin:0,frequency:10,onset:0,cluster:0,startWord:0,midWord:1,endWord:1}],Ve=[{phoneme:"f",form:"f",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"f",form:"ph",origin:2,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"f",form:"gh",origin:0,frequency:1,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"v",form:"v",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"v",form:"f",origin:3,frequency:1,startWord:0,midWord:0,endWord:25},{phoneme:"v",form:"ve",origin:3,onset:0,frequency:1,startWord:0,midWord:0,endWord:50},{phoneme:"v",form:"ph",origin:2,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"θ",form:"th",origin:2,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"ð",form:"th",origin:2,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"s",form:"s",origin:3,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"s",form:"c",origin:3,frequency:2,cluster:0,startWord:1,midWord:1,endWord:0,condition:{rightContext:["front-vowel"]}},{phoneme:"s",form:"sc",origin:3,frequency:2,coda:0,cluster:0,startWord:1,midWord:1,endWord:0},{phoneme:"s",form:"ps",origin:2,frequency:1,coda:0,cluster:0,startWord:1,midWord:1,endWord:0},{phoneme:"s",form:"st",origin:0,frequency:2,coda:0,cluster:0,startWord:0,midWord:1,endWord:0},{phoneme:"s",form:"ce",origin:3,frequency:3,onset:0,cluster:0,startWord:0,midWord:0,endWord:1},{phoneme:"s",form:"se",origin:3,frequency:3,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"z",form:"z",origin:3,frequency:1e3,coda:0,startWord:1,midWord:1,endWord:0},{phoneme:"z",form:"s",origin:3,frequency:100,onset:0,startWord:0,midWord:100,endWord:1},{phoneme:"z",form:"x",origin:3,frequency:1,coda:0,startWord:1,midWord:0,endWord:0},{phoneme:"z",form:"ze",origin:3,frequency:4,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"z",form:"se",origin:3,frequency:1,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"ʃ",form:"sh",origin:0,frequency:750,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"ti",origin:3,frequency:80,coda:0,startWord:1,midWord:1,endWord:1,condition:{rightContext:["vowel"]}},{phoneme:"ʃ",form:"ci",origin:3,frequency:50,coda:0,startWord:1,midWord:1,endWord:1,condition:{rightContext:["vowel"]}},{phoneme:"ʃ",form:"ch",origin:3,frequency:30,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"s",origin:3,frequency:20,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"si",origin:3,frequency:20,coda:0,startWord:1,midWord:1,endWord:1,condition:{rightContext:["vowel"]}},{phoneme:"ʃ",form:"ce",origin:3,frequency:8,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"ssi",origin:3,frequency:7,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"sc",origin:3,frequency:10,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"xi",origin:3,frequency:10,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"sch",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʒ",form:"s",origin:3,frequency:10,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"ʒ",form:"si",origin:3,frequency:10,onset:0,cluster:0,startWord:0,midWord:1,endWord:0},{phoneme:"ʒ",form:"z",origin:3,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"ʒ",form:"g",origin:3,frequency:10,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʒ",form:"ge",origin:3,frequency:10,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʒ",form:"dge",origin:3,frequency:10,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"h",form:"h",origin:0,frequency:50,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"h",form:"wh",origin:0,frequency:1,coda:0,startWord:1,midWord:0,endWord:0}],Ee=[{phoneme:"tʃ",form:"ch",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"tʃ",form:"tch",origin:0,frequency:100,onset:0,startWord:1,midWord:1,endWord:1,condition:{leftContext:["lax-vowel"]}},{phoneme:"tʃ",form:"tu",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"tʃ",form:"te",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"dʒ",form:"g",origin:3,frequency:2,coda:0,startWord:1,midWord:1,endWord:0,condition:{rightContext:["front-vowel"]}},{phoneme:"dʒ",form:"j",origin:3,frequency:20,coda:0,cluster:0,startWord:1,midWord:1,endWord:0},{phoneme:"dʒ",form:"ge",origin:3,frequency:6,onset:0,startWord:1,midWord:1,endWord:0},{phoneme:"dʒ",form:"dge",origin:3,frequency:10,onset:0,startWord:0,midWord:1,endWord:1,condition:{leftContext:["lax-vowel"]}},{phoneme:"dʒ",form:"di",origin:3,frequency:1,onset:0,startWord:0,midWord:1,endWord:0},{phoneme:"dʒ",form:"gg",origin:3,frequency:1,onset:0,startWord:0,midWord:1,endWord:0}],ke=[{phoneme:"p",form:"p",origin:3,frequency:50,startWord:1,midWord:1,endWord:1},{phoneme:"b",form:"b",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"b",form:"pb",origin:3,frequency:1,onset:0,cluster:0,startWord:0,midWord:1,endWord:0},{phoneme:"t",form:"t",origin:3,frequency:2500,startWord:1,midWord:1,endWord:1},{phoneme:"t",form:"th",origin:2,frequency:1,coda:0,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"t",form:"bt",origin:3,frequency:1,onset:0,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"t",form:"ed",origin:3,frequency:2,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"d",form:"d",origin:3,frequency:300,startWord:1,midWord:1,endWord:1},{phoneme:"d",form:"ed",origin:3,frequency:6,onset:0,cluster:300,startWord:0,midWord:0,endWord:1},{phoneme:"k",form:"k",origin:3,frequency:50,startWord:1,midWord:1,endWord:10},{phoneme:"k",form:"c",origin:3,frequency:20,cluster:100,startWord:1,midWord:1,endWord:0,condition:{notRightContext:["front-vowel"]}},{phoneme:"k",form:"ck",origin:3,frequency:100,onset:0,startWord:0,midWord:1,endWord:10,condition:{leftContext:["lax-vowel"]}},{phoneme:"k",form:"ch",origin:3,frequency:2,startWord:1,midWord:1,endWord:1},{phoneme:"k",form:"lk",origin:3,frequency:4,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"k",form:"q",origin:3,frequency:1,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"g",form:"g",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"g",form:"gh",origin:3,frequency:2,coda:0,cluster:0,startWord:1,midWord:0,endWord:0},{phoneme:"g",form:"gu",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:0},{phoneme:"g",form:"gue",origin:3,frequency:3,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"aɪə",form:"ire",origin:0,frequency:50,startWord:3,midWord:1,endWord:100},{phoneme:"aɪə",form:"ia",origin:0,frequency:30,startWord:2,midWord:1,endWord:80},{phoneme:"aɪə",form:"ye",origin:0,frequency:20,startWord:2,midWord:1,endWord:70},{phoneme:"aɪə",form:"oi",origin:1,frequency:5,startWord:1,midWord:1,endWord:50},{phoneme:"aɪə",form:"ie",origin:3,frequency:10,startWord:3,midWord:2,endWord:0},{phoneme:"aʊə",form:"ou",origin:1,frequency:50,startWord:2,midWord:1,endWord:100},{phoneme:"aʊə",form:"owe",origin:0,frequency:40,startWord:1,midWord:1,endWord:100},{phoneme:"eɪə",form:"aye",origin:0,frequency:50,startWord:2,midWord:1,endWord:100},{phoneme:"eɪə",form:"ayo",origin:0,frequency:30,startWord:2,midWord:1,endWord:80},{phoneme:"eɪə",form:"eyo",origin:0,frequency:10,startWord:0,midWord:1,endWord:100},{phoneme:"ɔɪə",form:"oye",origin:1,frequency:50,startWord:2,midWord:1,endWord:100},{phoneme:"ɔɪə",form:"oya",origin:1,frequency:40,startWord:1,midWord:1,endWord:100},{phoneme:"əʊə",form:"owe",origin:0,frequency:50,startWord:1,midWord:2,endWord:100},{phoneme:"əʊə",form:"oa",origin:4,frequency:10,startWord:1,midWord:0,endWord:100},{phoneme:"əʊə",form:"oa",origin:0,frequency:5,startWord:1,midWord:0,endWord:100}],Re=["Germanic","French","Greek","Latin","Other"],H=[...Ce,...Se,...Me,..._e,...Le,...xe,...Ve,...Ee,...ke],L={onset:new Map,nucleus:new Map,coda:new Map},$={onset:new Map,nucleus:new Map,coda:new Map};function De(e,o){switch(o){case"onset":return e.onset;case"nucleus":return e.nucleus;case"coda":return e.coda}}for(const e of["onset","nucleus","coda"])for(const o of H){const r=De(o,e);if(r===void 0||r>0){L[e].has(o.phoneme)||(L[e].set(o.phoneme,[]),$[e].set(o.phoneme,[]));const n=L[e].get(o.phoneme),t=$[e].get(o.phoneme);n.push(o);const d=t.length>0?t[t.length-1]:0;t.push(d+o.frequency)}}const Ne=Object.freeze(Object.defineProperty({__proto__:null,ORIGINS:Re,cumulativeFrequencies:$,graphemeMaps:L,graphemes:H},Symbol.toStringTag,{value:"Module"})),Ie={id:"en",name:"English",phonemes:V,phonemeMaps:_,graphemes:H,graphemeMaps:L,invalidClusters:{onset:Z.map(e=>e.source),coda:J.map(e=>e.source),boundary:z.map(e=>e.source)},sonorityHierarchy:{mannerOfArticulation:G,placeOfArticulation:T,voicedBonus:B,tenseBonus:U},syllableStructure:{maxOnsetLength:3,maxCodaLength:4,maxNucleusLength:1,syllableCountWeights:ie},generationWeights:{onsetLength:{monosyllabic:se,followingNucleus:ae,default:le},codaLength:{monosyllabic:ce,monosyllabicDefault:ue,polysyllabicNonzero:We,zeroWeightEndOfWord:fe,zeroWeightMidWord:me},probability:{hasOnsetStartOfWord:ge,hasOnsetAfterCoda:ye,hasCodaMonosyllabic:be,hasCodaEndOfWord:qe,hasCodaMidWord:Oe,finalS:pe,boundaryDrop:he}},stress:{strategy:"weight-sensitive"},doubling:{enabled:!0,trigger:"lax-vowel",probability:80,maxPerWord:1,neverDouble:["v","w","j","h","ŋ","θ","ð","ʒ"],finalDoublingOnly:["f","s","l","z"],suppressAfterReduction:!0,suppressBeforeTense:!0,unstressedModifier:.5},spellingRules:[{name:"magic-e",pattern:"([aiouy])e([bcdfghjklmnpqrstvwxyz])$",replacement:"$1$2e",probability:98},{name:"ks-to-x",pattern:"(?<!^)ks",replacement:"x",probability:25},{name:"no-final-v",pattern:"v$",replacement:"ve",probability:95},{name:"no-final-j",pattern:"j$",replacement:"ge",probability:95},{name:"no-final-i",pattern:"i$",replacement:"y",probability:95}],vowelReduction:{enabled:!0,rules:[{source:"ʌ",target:"ə",probability:85},{source:"ɛ",target:"ɪ",probability:70},{source:"e",target:"ɪ",probability:70},{source:"ɑ",target:"ə",probability:65},{source:"ɔ",target:"ə",probability:60},{source:"æ",target:"ə",probability:40},{source:"o",target:"ə",probability:55},{source:"ɜ",target:"ə",probability:75}],reduceSecondaryStress:!0,secondaryStressProbability:30,positionalModifiers:{wordInitial:.7,wordMedial:1,wordFinal:.5}}},$e=(e,o)=>{const{word:r,syllableCount:n}=o,t=r.syllables[e];if(!(t.onset.length>0&&!t.onset[0].voiced&&t.onset[0].mannerOfArticulation==="stop"))return;let i=!1;if(e>0){const s=r.syllables[e-1];s.coda.length>0&&s.coda[s.coda.length-1].sound==="s"&&(i=u([[!0,5],[!1,95]]))}if(e===0?i=u([[!0,95],[!1,5]]):t.stress?i=u([[!0,90],[!1,10]]):e>0&&r.syllables[e-1].stress?i=u([[!0,50],[!1,50]]):e===n-1?t.coda.length===1&&!t.coda[0].voiced&&t.coda[0].mannerOfArticulation==="stop"?i=u([[!0,15],[!1,85]]):i=!1:i=u([[!0,30],[!1,70]]),i)if(e===n-1&&t.coda.length===1){const s={...t.coda[0],sound:t.coda[0].sound+"ʰ"};t.coda[0]=s}else{const s={...t.onset[0],sound:t.onset[0].sound+"ʰ"};t.onset[0]=s}},je=e=>{Ge(e),Te(e),ze(e)},Ge=e=>{const{word:o}=e,r=o.syllables,n=r.length;let t;if(n!==1){if(n===2)t=u([[0,70],[1,30]]);else{const d=K(r[n-2]);t=u([[n-2,d?70:30],[n-3,d?20:60],[0,10]])}r[t].stress="ˈ"}},Te=e=>{const{word:o}=e,r=o.syllables,n=r.length;if(n===1)return;const t=r.findIndex(s=>s.stress==="ˈ"),d=[0,1,2].filter(s=>s!==t&&s<=n-1),i=u(d.map(s=>[s,K(r[s])?70:30]));u([[!0,40],[!1,60]])&&(r[i].stress="ˌ")},ze=e=>{const{word:o}=e,r=o.syllables;for(let n=1;n<r.length-1;n++)!r[n-1].stress&&!r[n].stress&&!r[n+1].stress&&u([[!0,40],[!1,60]])&&(r[n].stress="ˌ")},K=e=>e.nucleus.length>1||e.coda.length>0,He=e=>{const{word:o}=e;let r="";o.syllables.forEach((n,t)=>{const d=n.onset.map(l=>l.sound).join(""),i=n.nucleus.map(l=>l.sound).join(""),s=n.coda.map(l=>l.sound).join("");let a=`${d}${i}${s}`;n.stress==="ˈ"?a=`ˈ${a}`:n.stress==="ˌ"?a=`ˌ${a}`:t>0&&(a=`.${a}`),r+=a}),o.pronunciation=r},Fe=(e,o)=>{const{word:r}=e,n=r.syllables;if(n.length<=1)return;const t=new Map(o.rules.map(d=>[d.source,d]));for(let d=0;d<n.length;d++){const i=n[d];if(i.stress==="ˈ"||i.stress==="ˌ"&&!o.reduceSecondaryStress)continue;let s=1;o.positionalModifiers&&(d===0?s=o.positionalModifiers.wordInitial??1:d===n.length-1?s=o.positionalModifiers.wordFinal??1:s=o.positionalModifiers.wordMedial??1);for(let a=0;a<i.nucleus.length;a++){const l=i.nucleus[a];if(l.tense)continue;const m=t.get(l.sound);if(!m)continue;let f=m.probability*s;i.stress==="ˌ"&&o.secondaryStressProbability!=null&&(f=f*(o.secondaryStressProbability/100)),f=Math.min(100,Math.max(0,Math.round(f)));const W=V.find(O=>O.sound===m.target);W&&u([[!0,f],[!1,100-f]])&&(i.nucleus[a]={...W,reduced:!0})}}},Pe=(e,o)=>{const r=e.word.syllables;for(let n=0;n<r.length;n++)$e(n,e);je(e),o?.enabled&&Fe(e,o),He(e)};function Be(e){const o={onset:new Map,nucleus:new Map,coda:new Map};for(const r of["onset","nucleus","coda"])for(const[n,t]of e[r]){let d=0;const i=[];for(const s of t)d+=s.frequency,i.push(d);o[r].set(n,i)}return o}function Ue(e){return e.map(o=>({name:o.name,regex:new RegExp(o.pattern,o.flags??"g"),replacement:o.replacement,probability:o.probability??100}))}function Ye(e,o){let r=e;for(const{regex:n,replacement:t,probability:d}of o)n.lastIndex=0,d>=100?r=r.replace(n,t):r=r.replace(n,(i,...s)=>{if(x()()<d/100){let a=t;for(let l=0;l<s.length-2;l++)s[l]!==void 0&&(a=a.replace(`$${l+1}`,s[l]));return a}return i});return r}function Ze(e){const o=new Map;o.set("lax-vowel",new Set),o.set("tense-vowel",new Set),o.set("front-vowel",new Set),o.set("vowel",new Set),o.set("consonant",new Set);for(const r of e)r.mannerOfArticulation==="highVowel"||r.mannerOfArticulation==="midVowel"||r.mannerOfArticulation==="lowVowel"?(o.get("vowel").add(r.sound),r.tense===!1&&o.get("lax-vowel").add(r.sound),r.tense===!0&&o.get("tense-vowel").add(r.sound),r.placeOfArticulation==="front"&&o.get("front-vowel").add(r.sound)):o.get("consonant").add(r.sound);return o}function R(e,o){const r=new Set;for(const n of e){const t=o.get(n);if(t)for(const d of t)r.add(d);else r.add(n)}return r}function Je(e,o,r,n,t,d,i,s){if(!e)return!0;if(e.wordPosition){let a=!1;const l=n||i===0,m=t||i===d-1,f=!l&&!m;for(const W of e.wordPosition)W==="initial"&&l&&(a=!0),W==="final"&&m&&(a=!0),W==="medial"&&f&&(a=!0);if(!a)return!1}return!(e.leftContext&&(!o||!R(e.leftContext,s).has(o.sound))||e.rightContext&&(!r||!R(e.rightContext,s).has(r.sound))||e.notLeftContext&&o&&R(e.notLeftContext,s).has(o.sound)||e.notRightContext&&r&&R(e.notRightContext,s).has(r.sound))}function Ke(e,o,r,n,t,d,i,s,a,l,m){if(!e||!e.enabled||!r||i||t.length!==1||d!=="onset"&&d!=="coda"||m.doublingCount>=e.maxPerWord)return!1;if(e.trigger==="lax-vowel"){const O=r.nucleus!=null&&r.nucleus>0,p=r.tense===!1;if(!O||!p)return!1}if(e.neverDouble.includes(o.sound)||s&&e.finalDoublingOnly&&e.finalDoublingOnly.length>0&&!e.finalDoublingOnly.includes(o.sound)||e.suppressAfterReduction&&l||e.suppressBeforeTense&&n&&n.tense===!0)return!1;let f=e.probability;return e.unstressedModifier!=null&&!a&&(f*=e.unstressedModifier),f=Math.min(100,Math.max(0,Math.round(f))),f<=0?!1:u([[!0,f],[!1,100-f]])}function Qe(e,o,r,n,t=!1,d=!1,i=!1,s,a,l,m,f,W,O,p,S,q){const g=e[n].get(r.sound),E=o[n].get(r.sound);if(!g||!E||g.length===0)return"";let b=g,y=E;if(p){const c=g.map((h,M)=>({g:h,i:M})).filter(({g:h})=>Je(h.condition,s,a,d,i,q??0,S??0,p));if(c.length>0&&c.length<g.length){b=c.map(M=>M.g);let h=0;y=b.map(M=>(h+=M.frequency,h))}}const D=y[y.length-1];let k=x()()*D,A;for(let c=0;c<b.length;c++){const h=b[c];if((!t||!h.cluster||h.cluster>0)&&(!d||!h.startWord||h.startWord>0)&&(!i||!h.endWord||h.endWord>0)&&(!i&&!d||h.midWord>0)&&k<y[c]){A=h;break}}A||(A=b.find(c=>(!t||!c.cluster||c.cluster>0)&&(!d||!c.startWord||c.startWord>0)&&(!i||!c.endWord||c.endWord>0)&&(!i&&!d||c.midWord>0))||b[0]);let{form:w}=A;const v=O??{doublingCount:0};return Ke(l,r,s,W,w,n,t,i,m,f??!1,v)&&(w+=w,v.doublingCount++),w}function Xe(e){const o=e.graphemeMaps,r=Be(o),n=e.doubling,t=Ue(e.spellingRules??[]),d=Ze(e.phonemes);return i=>{const{syllables:s,written:a}=i.word,l=s.flatMap((p,S)=>["onset","nucleus","coda"].flatMap(q=>p[q].map(g=>({phoneme:g,syllableIndex:S,position:q,stress:p.stress})))),m=[],f=[];let W=[];const O={doublingCount:0};for(let p=0;p<l.length;p++){const{phoneme:S,syllableIndex:q,position:g,stress:E}=l[p],b=l[p-1],y=l[p+1],D=b?.syllableIndex===q&&b?.position===g||y?.syllableIndex===q&&y?.position===g,k=b?.phoneme,A=k?.reduced??!1;let w;for(let c=p+1;c<l.length;c++)if(l[c].position==="nucleus"){w=l[c].phoneme;break}const v=Qe(o,r,S,g,D,p===0,p===l.length-1,k,y?.phoneme,n,E,A,w,O,d,p,l.length);if(W.length>0&&v.length>0&&W[W.length-1].slice(-1)===v[0]?W.push(v.slice(1)):W.push(v),!y||y.syllableIndex!==q){let c=Ye(W.join(""),t);m.length>0&&c.length>0&&m[m.length-1].slice(-1)===c[0]&&(c=c.slice(1)),m.push(c),f.push(c),y&&f.push("&shy;"),W=[]}}a.clean=m.join(""),a.hyphenated=f.join("")}}function eo(e){te(e);const o=de(e),r={onset:Array.from(e.phonemeMaps.onset.values()).flat(),coda:Array.from(e.phonemeMaps.coda.values()).flat(),nucleus:Array.from(e.phonemeMaps.nucleus.values()).flat()},n={onset:new RegExp(e.invalidClusters.onset.join("|"),"i"),coda:new RegExp(e.invalidClusters.coda.join("|"),"i"),nucleus:new RegExp(e.invalidClusters.boundary.join("|"),"i")},t=Xe(e);return{config:e,sonorityLevels:o,positionPhonemes:r,invalidClusterRegexes:n,generateWrittenForm:t}}function C(e,o){return e.sonorityLevels.get(o)??0}function F(e,o){const r=ro(e.positionPhonemes[o.position],e,o);for(;o.cluster.length<o.maxLength&&r.length>0;){const n=ao(r,o);if(!n||(o.cluster.push(n),lo(o)))break;oo(r,e,o)}return o.cluster}function oo(e,o,r){for(let n=e.length-1;n>=0;n--)Q(e[n],o,r)||e.splice(n,1)}function ro(e,o,r){return e.filter(n=>Q(n,o,r))}function Q(e,o,r){if(r.ignore.includes(e.sound)||r.cluster.some(t=>t.sound===e.sound)||!no(e,r)||!to(e,o,r))return!1;const n=r.cluster.map(t=>t.sound).join("")+e.sound;return!o.invalidClusterRegexes[r.position].test(n)}function no(e,{position:o,isStartOfWord:r,isEndOfWord:n}){const t=X(e,o);return(t===void 0||t>0)&&(!r||e.startWord===void 0||e.startWord>0)&&(!n||e.endWord===void 0||e.endWord>0)}function to(e,o,{cluster:r,position:n}){const t=r[r.length-1];switch(n){case"onset":return io(e,o,r,t);case"coda":return so(e,o,t);case"nucleus":return!0;default:return!1}}function io(e,o,r,n){if(r.length===0||r.length===1&&r[0].sound==="s"&&["t","p","k"].includes(e.sound))return!0;if(e.placeOfArticulation===n?.placeOfArticulation)return!1;const d=n&&["stop"].includes(n.mannerOfArticulation),i=d?["glide","liquid"].includes(e.mannerOfArticulation):!1;return d?i:C(o,e)>C(o,n)}function so(e,o,r){if(!r)return!0;const n=C(o,r),t=C(o,e),d=r.mannerOfArticulation,i=e.mannerOfArticulation,s=d=="fricative"&&i=="fricative"||d=="stop"&&i=="stop",a=d=="stop"&&i=="fricative"||d=="stop"&&i=="sibilant"||d=="sibilant"&&i==="nasal";return s||a||t<n}function ao(e,{position:o,isStartOfWord:r,isEndOfWord:n}){const t=e.map(d=>{const i=d[o]??0,s=r&&d.startWord||n&&d.endWord||d.midWord||1;return[d,i*s]});return u(t)}function lo({position:e,cluster:o}){return e==="onset"&&o.length===2&&["liquid","nasal"].includes(o[1].mannerOfArticulation)}function co(e,o,r,n){const t=o.word.syllables[o.currSyllableIndex-1],d=t&&t.coda.length===0,{onsetLength:i}=e.config.generationWeights,s=u(n?i.monosyllabic:d?i.followingNucleus:i.default);if(s===0)return[];const a=t?t.coda.map(l=>l.sound):[];return F(e,{position:"onset",cluster:[],ignore:a,isStartOfWord:r,isEndOfWord:!1,maxLength:s})}function uo(e,o,r,n){return F(e,{position:"nucleus",cluster:[],ignore:[],isStartOfWord:r,isEndOfWord:n,maxLength:1})}function fo(e,o,r,n,t){const d=r.onset.length,{codaLength:i,probability:s}=e.config.generationWeights,a=t?i.monosyllabic[d]??i.monosyllabicDefault:[[0,n?i.zeroWeightEndOfWord:i.zeroWeightMidWord],...i.polysyllabicNonzero],l=u(a);if(l===0)return[];const m=F(e,{position:"coda",cluster:[],ignore:[],isStartOfWord:!1,isEndOfWord:n,maxLength:l});if(n&&u([[!0,s.finalS],[!1,100-s.finalS]])){const f=e.config.phonemes.find(W=>W.sound==="s");f&&m.push(f)}return m}function mo(e,o,r){const n=o.coda.at(-1),t=r.onset[0];if(!n||!t)return[o,r];const d=C(e,n),i=C(e,t),{boundaryDrop:s}=e.config.generationWeights.probability;return i===d&&u([[!0,s],[!1,100-s]])&&o.coda.pop(),[o,r]}function Wo(e,o){const r=o.currSyllableIndex===o.syllableCount-1,n=o.currSyllableIndex===0,t=o.word.syllables[o.currSyllableIndex-1],i=o.syllableCount===1,s={onset:[],nucleus:[],coda:[]},{probability:a}=e.config.generationWeights,l=po(a,n,t),m=ho(a,r,i);return l&&(s.onset=co(e,o,n,i)),s.nucleus=uo(e,o,n,r),m&&(s.coda=fo(e,o,s,r,i)),s}function po(e,o,r){return o?u([[!0,e.hasOnsetStartOfWord],[!1,100-e.hasOnsetStartOfWord]]):r&&r.coda.length>0?u([[!0,e.hasOnsetAfterCoda],[!1,100-e.hasOnsetAfterCoda]]):!0}function ho(e,o,r){return u(r?[[!0,e.hasCodaMonosyllabic],[!1,100-e.hasCodaMonosyllabic]]:o?[[!0,e.hasCodaEndOfWord],[!1,100-e.hasCodaEndOfWord]]:[[!0,e.hasCodaMidWord],[!1,100-e.hasCodaMidWord]])}function go(e,o){o.syllableCount||(o.syllableCount=u(e.config.syllableStructure.syllableCountWeights));const r=new Array(o.syllableCount);let n;for(let t=0;t<o.syllableCount;t++){let d=Wo(e,o);n&&([n,d]=mo(e,n,d)),r[t]=d,n=d,o.currSyllableIndex++}o.word.syllables=r}const N=eo(Ie),yo=(e={})=>{const o=x(),r={word:{syllables:[],pronunciation:"",written:{clean:"",hyphenated:""}},syllableCount:e.syllableCount||0,currSyllableIndex:0};e.seed!==void 0&&I(ne(e.seed));try{return go(N,r),N.generateWrittenForm(r),Pe(r,N.config.vowelReduction),r.word}finally{I(o)}},bo={generateWord:yo,random:re,phonemes:Ae,graphemes:Ne};self.unglish=bo;
