function we(e,o){switch(o){case"onset":return e.onset;case"nucleus":return e.nucleus;case"coda":return e.coda}}const ve=(()=>{let e=Date.now();return()=>(e^=e<<13,e^=e>>17,e^=e<<5,(e>>>0)/2**32)})(),fe=ve;let ee=fe;const D=()=>ee,K=e=>{ee=e},qe=()=>{ee=fe},Ae=Object.freeze(Object.defineProperty({__proto__:null,getRand:D,overrideRand:K,resetRand:qe},Symbol.toStringTag,{value:"Module"})),Ce=e=>{let o=e;return()=>(o=Math.sin(o)*1e4,o-Math.floor(o))},y=e=>{const o=e.reduce((t,[i,d])=>t+d,0),n=D()()*o;let r=0;for(const[t,i]of e)if(r+=i,n<r)return t;return e[e.length-1][0]};function Se(e){const o=new Set(e.phonemes);for(const t of["onset","nucleus","coda"])for(const[i,d]of e.phonemeMaps[t])for(const s of d)if(!o.has(s))throw new Error(`phonemeMaps.${t} contains phoneme "${s.sound}" (key "${i}") not found in phonemes[]`);const n=new Set(e.graphemes);for(const t of["onset","nucleus","coda"])for(const[i,d]of e.graphemeMaps[t])for(const s of d)if(!n.has(s))throw new Error(`graphemeMaps.${t} contains grapheme "${s.form}" (key "${i}") not found in graphemes[]`);const{probability:r}=e.generationWeights;for(const[t,i]of Object.entries(r))if(i<0||i>100)throw new Error(`generationWeights.probability.${t} is ${i}, must be in [0, 100]`)}function ke(e){const{mannerOfArticulation:o,placeOfArticulation:n,voicedBonus:r,tenseBonus:t}=e.sonorityHierarchy;return new Map(e.phonemes.map(i=>[i,(o[i.mannerOfArticulation]??0)+(n[i.placeOfArticulation]??0)+(i.voiced?r:0)+(i.tense?t:0)]))}const me=.5,We=.25,xe=[[1,5e3],[2,3e4],[3,29700],[4,3e3],[5,200],[6,50],[7,5]],Le=[[0,50],[1,100],[2,200],[3,150]],Me=[[0,0],[1,675],[2,125],[3,80]],_e=[[0,150],[1,675],[2,125],[3,80]],Ee={0:[[0,20],[1,100],[2,200],[3,150]],1:[[0,80],[1,150],[2,150],[3,100]],2:[[0,50],[1,200],[2,100],[3,50]],3:[[0,100],[1,300],[2,50],[3,20]]},Ie=[[0,150],[1,200],[2,30],[3,10]],Re=1200,Ne=6e3,Ve=[[1,3e3],[2,900],[3,100]],ze=15,je=90,Te=95,Ge=80,Pe=80,$e=90,De=30,oe={highVowel:9,midVowel:8.5,lowVowel:8,glide:7,liquid:6,nasal:5,lateralApproximant:6,sibilant:4,fricative:3,affricate:2,stop:1},ne={front:.25,central:0,back:-.25,bilabial:-.5,labiodental:-.3,dental:-.2,alveolar:0,velar:.1,postalveolar:.2,"labial-velar":.2,palatal:.3,glottal:.5},Fe={front:9,central:5,back:2,bilabial:8,labiodental:7,dental:6,alveolar:5,postalveolar:4,palatal:3,"labial-velar":4,velar:2,glottal:1},F=[{sound:"i:",mannerOfArticulation:"highVowel",tense:!0,nucleus:150,startWord:3,midWord:1,endWord:4,voiced:!0,placeOfArticulation:"front"},{sound:"ɪ",mannerOfArticulation:"highVowel",tense:!1,nucleus:230,startWord:3,midWord:8,endWord:1,voiced:!0,placeOfArticulation:"front"},{sound:"e",mannerOfArticulation:"midVowel",tense:!1,nucleus:140,startWord:8,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"front"},{sound:"ɛ",mannerOfArticulation:"midVowel",tense:!1,nucleus:280,startWord:8,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"front"},{sound:"ə",mannerOfArticulation:"midVowel",tense:!1,nucleus:280,startWord:4,midWord:8,endWord:1,voiced:!0,placeOfArticulation:"central"},{sound:"ɜ",mannerOfArticulation:"midVowel",tense:!1,nucleus:50,startWord:4,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"central"},{sound:"ɚ",mannerOfArticulation:"midVowel",tense:!1,nucleus:90,startWord:1,midWord:2,endWord:5,voiced:!0,placeOfArticulation:"central"},{sound:"æ",mannerOfArticulation:"lowVowel",tense:!1,nucleus:220,startWord:8,midWord:6,endWord:1,voiced:!0,placeOfArticulation:"front"},{sound:"ɑ",mannerOfArticulation:"lowVowel",tense:!0,nucleus:150,startWord:6,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"back"},{sound:"ɔ",mannerOfArticulation:"lowVowel",tense:!0,nucleus:180,startWord:6,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"back"},{sound:"o",mannerOfArticulation:"lowVowel",tense:!0,nucleus:100,startWord:6,midWord:2,endWord:2,voiced:!0,placeOfArticulation:"back"},{sound:"ʊ",mannerOfArticulation:"highVowel",tense:!0,nucleus:70,startWord:4,midWord:2,endWord:0,voiced:!0,placeOfArticulation:"back"},{sound:"u",mannerOfArticulation:"highVowel",tense:!0,nucleus:80,startWord:8,midWord:2,endWord:2,voiced:!0,placeOfArticulation:"back"},{sound:"ʌ",mannerOfArticulation:"midVowel",tense:!1,nucleus:220,startWord:4,midWord:2,endWord:1,voiced:!0,placeOfArticulation:"central"},{sound:"eɪ",mannerOfArticulation:"midVowel",tense:!0,nucleus:170,startWord:6,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"front"},{sound:"ɪə",mannerOfArticulation:"midVowel",tense:!0,nucleus:30,startWord:4,midWord:2,endWord:4,voiced:!0,placeOfArticulation:"central"},{sound:"eə",mannerOfArticulation:"midVowel",tense:!0,nucleus:20,startWord:4,midWord:2,endWord:0,voiced:!0,placeOfArticulation:"central"},{sound:"aɪ",mannerOfArticulation:"midVowel",tense:!0,nucleus:150,startWord:6,midWord:2,endWord:3,voiced:!0,placeOfArticulation:"front"},{sound:"ʊə",mannerOfArticulation:"midVowel",tense:!0,nucleus:10,startWord:6,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"əʊ",mannerOfArticulation:"midVowel",tense:!0,nucleus:80,startWord:1,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"back"},{sound:"ɔɪ",mannerOfArticulation:"midVowel",tense:!0,nucleus:20,startWord:4,midWord:2,endWord:4,voiced:!0,placeOfArticulation:"front"},{sound:"aʊ",mannerOfArticulation:"midVowel",tense:!0,nucleus:20,startWord:1,midWord:1,endWord:6,voiced:!0,placeOfArticulation:"back"},{sound:"aɪə",mannerOfArticulation:"lowVowel",tense:!0,nucleus:80,startWord:1,midWord:1,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"aʊə",mannerOfArticulation:"lowVowel",tense:!0,nucleus:60,startWord:1,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"eɪə",mannerOfArticulation:"midVowel",tense:!0,nucleus:50,startWord:0,midWord:1,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"ɔɪə",mannerOfArticulation:"midVowel",tense:!0,nucleus:40,startWord:0,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"əʊə",mannerOfArticulation:"midVowel",tense:!0,nucleus:30,startWord:1,midWord:2,endWord:6,voiced:!0,placeOfArticulation:"central"},{sound:"j",mannerOfArticulation:"glide",onset:10,coda:20,startWord:6,midWord:2,endWord:2,voiced:!0,placeOfArticulation:"palatal"},{sound:"w",mannerOfArticulation:"glide",onset:120,coda:10,startWord:10,midWord:2,endWord:2,voiced:!0,placeOfArticulation:"labial-velar"},{sound:"l",mannerOfArticulation:"liquid",onset:200,coda:200,startWord:8,midWord:5,endWord:8,voiced:!0,placeOfArticulation:"alveolar"},{sound:"r",mannerOfArticulation:"liquid",onset:500,coda:100,startWord:8,midWord:2,endWord:8,voiced:!0,placeOfArticulation:"postalveolar"},{sound:"m",mannerOfArticulation:"nasal",onset:100,coda:176,startWord:6,midWord:2,endWord:8,voiced:!0,placeOfArticulation:"bilabial"},{sound:"n",mannerOfArticulation:"nasal",onset:350,coda:350,startWord:8,midWord:2,endWord:10,voiced:!0,placeOfArticulation:"alveolar"},{sound:"ŋ",mannerOfArticulation:"nasal",onset:0,coda:200,startWord:0,midWord:2,endWord:30,voiced:!0,placeOfArticulation:"velar"},{sound:"f",mannerOfArticulation:"fricative",onset:100,coda:100,startWord:6,midWord:2,endWord:4,voiced:!1,placeOfArticulation:"labiodental"},{sound:"θ",mannerOfArticulation:"fricative",onset:50,coda:50,startWord:4,midWord:2,endWord:4,voiced:!1,placeOfArticulation:"dental"},{sound:"h",mannerOfArticulation:"fricative",onset:180,coda:0,startWord:10,midWord:2,endWord:0,voiced:!1,placeOfArticulation:"glottal"},{sound:"v",mannerOfArticulation:"fricative",onset:250,coda:20,startWord:6,midWord:2,endWord:8,voiced:!0,placeOfArticulation:"labiodental"},{sound:"ð",mannerOfArticulation:"fricative",onset:250,coda:50,startWord:6,midWord:2,endWord:4,voiced:!0,placeOfArticulation:"dental"},{sound:"z",mannerOfArticulation:"sibilant",onset:5,coda:50,startWord:4,midWord:4,endWord:4,voiced:!0,placeOfArticulation:"alveolar"},{sound:"ʒ",mannerOfArticulation:"sibilant",onset:5,coda:3,startWord:0,midWord:6,endWord:0,voiced:!0,placeOfArticulation:"postalveolar"},{sound:"s",mannerOfArticulation:"sibilant",onset:200,coda:100,startWord:10,midWord:2,endWord:10,voiced:!1,placeOfArticulation:"alveolar"},{sound:"ʃ",mannerOfArticulation:"sibilant",onset:35,coda:80,startWord:4,midWord:1,endWord:5,voiced:!1,placeOfArticulation:"postalveolar"},{sound:"tʃ",voiced:!1,placeOfArticulation:"postalveolar",mannerOfArticulation:"affricate",onset:40,coda:40,startWord:4,midWord:2,endWord:2},{sound:"dʒ",voiced:!0,placeOfArticulation:"postalveolar",mannerOfArticulation:"affricate",onset:30,coda:20,startWord:4,midWord:2,endWord:2},{sound:"p",voiced:!1,placeOfArticulation:"bilabial",mannerOfArticulation:"stop",onset:165,coda:50,startWord:8,midWord:10,endWord:6},{sound:"t",voiced:!1,placeOfArticulation:"alveolar",mannerOfArticulation:"stop",onset:350,coda:350,startWord:10,midWord:10,endWord:10},{sound:"k",voiced:!1,placeOfArticulation:"velar",mannerOfArticulation:"stop",onset:320,coda:100,startWord:14,midWord:10,endWord:10},{sound:"b",voiced:!0,placeOfArticulation:"bilabial",mannerOfArticulation:"stop",onset:210,coda:100,startWord:8,midWord:4,endWord:4},{sound:"d",voiced:!0,placeOfArticulation:"alveolar",mannerOfArticulation:"stop",onset:210,coda:210,startWord:8,midWord:4,endWord:8},{sound:"g",voiced:!0,placeOfArticulation:"velar",mannerOfArticulation:"stop",onset:150,coda:100,startWord:6,midWord:4,endWord:4}],P={onset:new Map,nucleus:new Map,coda:new Map};for(const e of["onset","nucleus","coda"])for(const o of F)o[e]!==void 0&&o[e]>0&&(P[e].has(o.sound)||P[e].set(o.sound,[]),P[e].get(o.sound).push(o));const He=new Map(F.map(e=>[e,oe[e.mannerOfArticulation]+(ne[e.placeOfArticulation]??0)+(e.voiced?me:0)+(e.tense?We:0)])),pe=[/rɜ/,/ɜr/,/ʃh/,/sʃ/,/ʒs/],he=[...pe,/fn/,/t[ðn]/,/[θð]n/,/mw/,/k[nbf]/,/d[tpnmg]/,/pb/,/[ʒl]r/,/^.*.?[ðŋhʃ].?.*$/],Be=[...he,/^[wrlvznmjhʃ].{1,2}/,/^.[wzgdbθhvʃsf]/,/[^s]k/,/t[θd]/,/dl/,/dʒ./,/pn/,/^sr/],Ue=[...he,/vsk$/,/.?[kθð](?![szd])$/,/lv(?![zd])$/,/[fʃ](?![zdt])/,/m[tvg]/,/[vlstd]g/,/.*sp/,/t[pb]/,/pk/,/n[bmp]/,/td/,/nzt/,/lnd/,/dʒt/,/sn/,/.*.?v$/,/.*.?mp$/,/.*.?b$/,/.*?[jw]$/,/[szʒ]l$/,/[wðf]r$/,/[θðf]rl$/],Ye=Object.freeze(Object.defineProperty({__proto__:null,forwardnessToPlaceOfArticulation:Fe,invalidBoundaryClusters:pe,invalidCodaClusters:Ue,invalidOnsetClusters:Be,phonemeMaps:P,phonemes:F,sonorityLevels:He,sonorityToMannerOfArticulation:oe,sonorityToPlaceOfArticulation:ne},Symbol.toStringTag,{value:"Module"})),Ze=[{phoneme:"i:",form:"ee",origin:0,frequency:50,startWord:0,midWord:4,endWord:1},{phoneme:"i:",form:"ea",origin:0,frequency:50,startWord:20,midWord:3,endWord:1},{phoneme:"i:",form:"e",origin:0,frequency:1,startWord:100,midWord:1,endWord:0},{phoneme:"i:",form:"y",origin:1,frequency:1,startWord:0,midWord:1,endWord:100},{phoneme:"i:",form:"ie",origin:0,frequency:2,startWord:0,midWord:5,endWord:2},{phoneme:"i:",form:"ei",origin:0,frequency:2,startWord:10,midWord:1,endWord:0},{phoneme:"i:",form:"eo",origin:1,frequency:1,startWord:0,midWord:1,endWord:0},{phoneme:"ɪ",form:"i",origin:0,frequency:1e3,startWord:5,midWord:10,endWord:.01},{phoneme:"ɪ",form:"y",origin:1,frequency:1,startWord:0,midWord:1,endWord:0},{phoneme:"ɪ",form:"ui",origin:1,frequency:1,startWord:0,midWord:1,endWord:0},{phoneme:"e",form:"e",origin:0,frequency:250,startWord:1,midWord:1,endWord:1},{phoneme:"e",form:"ea",origin:0,frequency:10,startWord:0,midWord:1,endWord:0},{phoneme:"e",form:"ai",origin:0,frequency:5,startWord:0,midWord:1,endWord:0},{phoneme:"e",form:"ie",origin:0,frequency:3,startWord:0,midWord:1,endWord:0},{phoneme:"ɛ",form:"e",origin:0,frequency:1e3,startWord:10,midWord:10,endWord:5},{phoneme:"ɛ",form:"ea",origin:0,frequency:10,onset:0,startWord:0,midWord:10,endWord:5},{phoneme:"æ",form:"a",origin:0,frequency:10,startWord:10,midWord:10,endWord:5},{phoneme:"ɑ",form:"a",origin:0,frequency:1e3,startWord:10,midWord:10,endWord:5},{phoneme:"ɑ",form:"ah",origin:4,frequency:10,startWord:0,midWord:5,endWord:10},{phoneme:"ɑ",form:"aa",origin:4,frequency:1,startWord:1,midWord:1,endWord:0},{phoneme:"ɑ",form:"au",origin:0,frequency:40,startWord:1,midWord:10,endWord:0},{phoneme:"ɑ",form:"aue",origin:0,frequency:40,startWord:1,midWord:10,endWord:10},{phoneme:"ɔ",form:"o",origin:0,frequency:10,startWord:10,midWord:10,endWord:5},{phoneme:"ɔ",form:"aw",origin:0,frequency:1,onset:0,startWord:0,midWord:1,endWord:2},{phoneme:"o",form:"o",origin:0,frequency:100,startWord:10,midWord:10,endWord:1},{phoneme:"o",form:"oa",origin:0,frequency:100,startWord:1,midWord:10,endWord:0},{phoneme:"o",form:"ow",origin:0,frequency:2,startWord:0,midWord:2,endWord:10},{phoneme:"o",form:"oe",origin:0,frequency:40,startWord:0,midWord:0,endWord:3},{phoneme:"o",form:"ough",origin:4,frequency:1,onset:0,startWord:0,midWord:0,endWord:0},{phoneme:"o",form:"ew",origin:0,frequency:1,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"ʊ",form:"oo",origin:0,frequency:10,onset:0,startWord:0,midWord:2,endWord:2},{phoneme:"ʊ",form:"u",origin:0,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"u",form:"ou",origin:1,frequency:2,startWord:0,midWord:10,endWord:0},{phoneme:"u",form:"oo",origin:0,frequency:10,startWord:0,midWord:1,endWord:1},{phoneme:"u",form:"u",origin:0,frequency:10,startWord:10,midWord:10,endWord:2},{phoneme:"u",form:"ue",origin:0,frequency:10,startWord:0,midWord:5,endWord:50},{phoneme:"u",form:"ew",origin:0,frequency:10,startWord:1,midWord:5,endWord:30},{phoneme:"ʌ",form:"u",origin:0,frequency:1e3,startWord:1,midWord:1,endWord:0},{phoneme:"ʌ",form:"uh",origin:0,frequency:30,startWord:1,midWord:4,endWord:1},{phoneme:"ə",form:"e",origin:0,frequency:500,startWord:5,midWord:10,endWord:1},{phoneme:"ə",form:"a",origin:0,frequency:4,startWord:1e3,midWord:5,endWord:9},{phoneme:"ə",form:"o",origin:0,frequency:1,startWord:1,midWord:5,endWord:1},{phoneme:"ə",form:"ou",origin:0,frequency:1,startWord:1,midWord:1,endWord:1},{phoneme:"ə",form:"u",origin:0,frequency:10,startWord:5,midWord:10,endWord:0}],Je=[{phoneme:"aɪ",form:"i",origin:3,frequency:10,startWord:1,midWord:10,endWord:10},{phoneme:"aɪ",form:"igh",origin:0,frequency:10,startWord:0,midWord:10,endWord:10,condition:{rightContext:["t"],wordPosition:["final"]}},{phoneme:"aɪ",form:"y",origin:0,frequency:1,startWord:0,midWord:1,endWord:50},{phoneme:"aɪ",form:"ie",origin:1,frequency:10,startWord:10,midWord:10,endWord:1},{phoneme:"aɪ",form:"ai",origin:3,frequency:1,startWord:0,midWord:1,endWord:0},{phoneme:"aɪ",form:"is",origin:0,frequency:1,startWord:1,midWord:0,endWord:0},{phoneme:"aɪ",form:"ye",origin:0,frequency:10,onset:0,startWord:0,midWord:5,endWord:10},{phoneme:"ʊə",form:"ue",origin:0,frequency:50,startWord:4,midWord:3,endWord:100},{phoneme:"ʊə",form:"ou",origin:0,frequency:30,startWord:3,midWord:2,endWord:100},{phoneme:"ʊə",form:"ue",origin:0,frequency:20,startWord:2,midWord:3,endWord:80},{phoneme:"ʊə",form:"oo",origin:0,frequency:10,startWord:2,midWord:2,endWord:100},{phoneme:"aʊ",form:"ow",origin:0,frequency:100,startWord:1,midWord:5,endWord:10},{phoneme:"aʊ",form:"ou",origin:1,frequency:10,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɔɪ",form:"oi",origin:3,frequency:10,coda:0,startWord:5,midWord:10,endWord:1},{phoneme:"ɔɪ",form:"oy",origin:0,frequency:2,onset:0,startWord:0,midWord:5,endWord:100},{phoneme:"eə",form:"ai",origin:0,frequency:50,startWord:4,midWord:5,endWord:100},{phoneme:"eə",form:"ae",origin:0,frequency:40,startWord:4,midWord:4,endWord:100},{phoneme:"eə",form:"ea",origin:0,frequency:30,startWord:4,midWord:3,endWord:100},{phoneme:"eə",form:"ei",origin:0,frequency:10,startWord:3,midWord:2,endWord:50},{phoneme:"eə",form:"ee",origin:0,frequency:20,startWord:0,midWord:3,endWord:80},{phoneme:"eə",form:"aye",origin:0,frequency:5,startWord:3,midWord:1,endWord:50},{phoneme:"ɪə",form:"ea",origin:0,frequency:10,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɪə",form:"ee",origin:0,frequency:10,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɪə",form:"ie",origin:1,frequency:10,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"eɪ",form:"a",origin:0,frequency:10,startWord:10,midWord:0,endWord:0},{phoneme:"eɪ",form:"ai",origin:3,frequency:10,coda:0,startWord:0,midWord:2,endWord:0},{phoneme:"eɪ",form:"ay",origin:0,frequency:10,onset:0,startWord:0,midWord:1,endWord:100},{phoneme:"eɪ",form:"eigh",origin:1,frequency:1,onset:0,startWord:0,midWord:4,endWord:10,condition:{rightContext:["t"]}},{phoneme:"eɪ",form:"ea",origin:0,frequency:5,startWord:0,midWord:1,endWord:0},{phoneme:"eɪ",form:"ey",origin:0,frequency:10,startWord:0,midWord:0,endWord:1},{phoneme:"eɪ",form:"ae",origin:3,frequency:2,startWord:1,midWord:1,endWord:0},{phoneme:"əʊ",form:"ow",origin:0,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"əʊ",form:"ou",origin:1,frequency:10,startWord:0,midWord:1,endWord:0},{phoneme:"əʊ",form:"oe",origin:1,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"əʊ",form:"ough",origin:4,frequency:1,onset:0,startWord:0,midWord:0,endWord:0}],Ke=[{phoneme:"ɜ",form:"e",origin:0,frequency:100,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɜ",form:"ai",origin:0,frequency:50,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ɚ",form:"er",origin:0,frequency:300,startWord:1,midWord:50,endWord:100},{phoneme:"ɚ",form:"ur",origin:0,frequency:100,startWord:10,midWord:30,endWord:80},{phoneme:"ɚ",form:"or",origin:3,frequency:300,startWord:0,midWord:20,endWord:50},{phoneme:"ɚ",form:"ar",origin:3,frequency:80,startWord:1,midWord:10,endWord:40},{phoneme:"ɚ",form:"re",origin:1,frequency:50,startWord:0,midWord:5,endWord:100},{phoneme:"ɚ",form:"ure",origin:3,frequency:30,startWord:0,midWord:10,endWord:80}],Qe=[{phoneme:"j",form:"y",origin:0,frequency:30,startWord:1,midWord:1,endWord:1},{phoneme:"j",form:"i",origin:3,frequency:1,startWord:1,midWord:1,endWord:1},{phoneme:"j",form:"j",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:0},{phoneme:"w",form:"w",origin:0,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"w",form:"wh",origin:0,coda:0,frequency:100,startWord:1,midWord:1,endWord:0,condition:{wordPosition:["initial"]}}],Xe=[{phoneme:"l",form:"l",origin:3,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"r",form:"r",origin:3,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"r",form:"wr",origin:0,frequency:1,coda:0,cluster:0,startWord:1,midWord:1,endWord:0,condition:{wordPosition:["initial"]}},{phoneme:"r",form:"rh",origin:2,frequency:1,coda:0,cluster:0,startWord:30,midWord:1,endWord:0}],eo=[{phoneme:"m",form:"m",origin:3,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"m",form:"mb",origin:5,frequency:2,onset:0,cluster:0,startWord:0,midWord:1,endWord:1,condition:{wordPosition:["final"]}},{phoneme:"m",form:"mn",origin:2,frequency:1,onset:0,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"m",form:"lm",origin:3,frequency:2,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"n",form:"n",origin:3,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"n",form:"mn",origin:2,frequency:1,coda:0,cluster:0,startWord:1,midWord:0,endWord:0},{phoneme:"n",form:"kn",origin:0,frequency:10,coda:0,cluster:0,startWord:1,midWord:1,endWord:0,condition:{wordPosition:["initial"]}},{phoneme:"n",form:"gn",origin:0,frequency:5,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"n",form:"pn",origin:2,frequency:1,coda:0,startWord:1,midWord:0,endWord:0},{phoneme:"ŋ",form:"ng",origin:0,frequency:10,onset:0,cluster:0,startWord:0,midWord:1,endWord:1}],oo=[{phoneme:"f",form:"f",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"f",form:"ph",origin:2,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"f",form:"gh",origin:0,frequency:1,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"v",form:"v",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"v",form:"f",origin:3,frequency:1,startWord:0,midWord:0,endWord:25},{phoneme:"v",form:"ve",origin:3,onset:0,frequency:1,startWord:0,midWord:0,endWord:50},{phoneme:"v",form:"ph",origin:2,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"θ",form:"th",origin:2,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"ð",form:"th",origin:2,frequency:10,startWord:1,midWord:1,endWord:1},{phoneme:"s",form:"s",origin:3,frequency:1e3,startWord:1,midWord:1,endWord:1},{phoneme:"s",form:"c",origin:3,frequency:2,cluster:0,startWord:1,midWord:1,endWord:0,condition:{rightContext:["front-vowel"]}},{phoneme:"s",form:"sc",origin:3,frequency:2,coda:0,cluster:0,startWord:1,midWord:1,endWord:0},{phoneme:"s",form:"ps",origin:2,frequency:1,coda:0,cluster:0,startWord:1,midWord:1,endWord:0},{phoneme:"s",form:"st",origin:0,frequency:2,coda:0,cluster:0,startWord:0,midWord:1,endWord:0},{phoneme:"s",form:"ce",origin:3,frequency:3,onset:0,cluster:0,startWord:0,midWord:0,endWord:1},{phoneme:"s",form:"se",origin:3,frequency:3,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"z",form:"z",origin:3,frequency:1e3,coda:0,startWord:1,midWord:1,endWord:0},{phoneme:"z",form:"s",origin:3,frequency:100,onset:0,startWord:0,midWord:100,endWord:1},{phoneme:"z",form:"x",origin:3,frequency:1,coda:0,startWord:1,midWord:0,endWord:0},{phoneme:"z",form:"ze",origin:3,frequency:4,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"z",form:"se",origin:3,frequency:1,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"ʃ",form:"sh",origin:0,frequency:750,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"ti",origin:3,frequency:80,coda:0,startWord:1,midWord:1,endWord:1,condition:{rightContext:["vowel"]}},{phoneme:"ʃ",form:"ci",origin:3,frequency:50,coda:0,startWord:1,midWord:1,endWord:1,condition:{rightContext:["vowel"]}},{phoneme:"ʃ",form:"ch",origin:3,frequency:30,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"s",origin:3,frequency:20,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"si",origin:3,frequency:20,coda:0,startWord:1,midWord:1,endWord:1,condition:{rightContext:["vowel"]}},{phoneme:"ʃ",form:"ce",origin:3,frequency:8,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"ssi",origin:3,frequency:7,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"sc",origin:3,frequency:10,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"xi",origin:3,frequency:10,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʃ",form:"sch",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʒ",form:"s",origin:3,frequency:10,cluster:0,startWord:0,midWord:1,endWord:0},{phoneme:"ʒ",form:"si",origin:3,frequency:10,onset:0,cluster:0,startWord:0,midWord:1,endWord:0},{phoneme:"ʒ",form:"z",origin:3,frequency:10,startWord:1,midWord:1,endWord:0},{phoneme:"ʒ",form:"g",origin:3,frequency:10,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʒ",form:"ge",origin:3,frequency:10,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"ʒ",form:"dge",origin:3,frequency:10,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"h",form:"h",origin:0,frequency:50,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"h",form:"wh",origin:0,frequency:1,coda:0,startWord:1,midWord:0,endWord:0}],no=[{phoneme:"tʃ",form:"ch",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"tʃ",form:"tch",origin:0,frequency:100,onset:0,startWord:1,midWord:1,endWord:1,condition:{leftContext:["lax-vowel"]}},{phoneme:"tʃ",form:"tu",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"tʃ",form:"te",origin:3,frequency:1,coda:0,startWord:1,midWord:1,endWord:1},{phoneme:"dʒ",form:"g",origin:3,frequency:2,coda:0,startWord:1,midWord:1,endWord:0,condition:{rightContext:["front-vowel"]}},{phoneme:"dʒ",form:"j",origin:3,frequency:20,coda:0,cluster:0,startWord:1,midWord:1,endWord:0},{phoneme:"dʒ",form:"ge",origin:3,frequency:6,onset:0,startWord:1,midWord:1,endWord:0},{phoneme:"dʒ",form:"dge",origin:3,frequency:10,onset:0,startWord:0,midWord:1,endWord:1,condition:{leftContext:["lax-vowel"]}},{phoneme:"dʒ",form:"di",origin:3,frequency:1,onset:0,startWord:0,midWord:1,endWord:0},{phoneme:"dʒ",form:"gg",origin:3,frequency:1,onset:0,startWord:0,midWord:1,endWord:0}],ro=[{phoneme:"p",form:"p",origin:3,frequency:50,startWord:1,midWord:1,endWord:1},{phoneme:"b",form:"b",origin:3,frequency:100,startWord:1,midWord:1,endWord:1},{phoneme:"b",form:"pb",origin:3,frequency:1,onset:0,cluster:0,startWord:0,midWord:1,endWord:0},{phoneme:"t",form:"t",origin:3,frequency:2500,startWord:1,midWord:1,endWord:1},{phoneme:"t",form:"th",origin:2,frequency:1,coda:0,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"t",form:"bt",origin:3,frequency:1,onset:0,cluster:0,startWord:0,midWord:1,endWord:1},{phoneme:"t",form:"ed",origin:3,frequency:2,onset:0,startWord:0,midWord:0,endWord:1},{phoneme:"d",form:"d",origin:3,frequency:300,startWord:1,midWord:1,endWord:1},{phoneme:"d",form:"ed",origin:3,frequency:6,onset:0,cluster:300,startWord:0,midWord:0,endWord:1},{phoneme:"k",form:"k",origin:3,frequency:50,startWord:1,midWord:1,endWord:10},{phoneme:"k",form:"c",origin:3,frequency:20,cluster:100,startWord:1,midWord:1,endWord:0,condition:{notRightContext:["front-vowel"]}},{phoneme:"k",form:"ck",origin:3,frequency:100,onset:0,startWord:0,midWord:1,endWord:10,condition:{leftContext:["lax-vowel"]}},{phoneme:"k",form:"ch",origin:3,frequency:2,startWord:1,midWord:1,endWord:1,condition:{rightContext:["vowel","r","l"]}},{phoneme:"k",form:"lk",origin:3,frequency:4,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"k",form:"q",origin:3,frequency:1,onset:0,startWord:1,midWord:1,endWord:1},{phoneme:"g",form:"g",origin:3,frequency:100,startWord:1,midWord:1,endWord:1,condition:{notRightContext:["front-vowel"]}},{phoneme:"g",form:"gh",origin:3,frequency:2,coda:0,cluster:0,startWord:1,midWord:0,endWord:0},{phoneme:"g",form:"gu",origin:3,frequency:5,coda:0,startWord:1,midWord:1,endWord:0},{phoneme:"g",form:"gue",origin:3,frequency:3,onset:0,startWord:0,midWord:1,endWord:1},{phoneme:"aɪə",form:"ire",origin:0,frequency:50,startWord:3,midWord:1,endWord:100},{phoneme:"aɪə",form:"ia",origin:0,frequency:30,startWord:2,midWord:1,endWord:80},{phoneme:"aɪə",form:"ye",origin:0,frequency:20,startWord:2,midWord:1,endWord:70},{phoneme:"aɪə",form:"oi",origin:1,frequency:5,startWord:1,midWord:1,endWord:50},{phoneme:"aɪə",form:"ie",origin:3,frequency:10,startWord:3,midWord:2,endWord:0},{phoneme:"aʊə",form:"ou",origin:1,frequency:50,startWord:2,midWord:1,endWord:100},{phoneme:"aʊə",form:"owe",origin:0,frequency:40,startWord:1,midWord:1,endWord:100},{phoneme:"eɪə",form:"aye",origin:0,frequency:50,startWord:2,midWord:1,endWord:100},{phoneme:"eɪə",form:"ayo",origin:0,frequency:30,startWord:2,midWord:1,endWord:80},{phoneme:"eɪə",form:"eyo",origin:0,frequency:10,startWord:0,midWord:1,endWord:100},{phoneme:"ɔɪə",form:"oye",origin:1,frequency:50,startWord:2,midWord:1,endWord:100},{phoneme:"ɔɪə",form:"oya",origin:1,frequency:40,startWord:1,midWord:1,endWord:100},{phoneme:"əʊə",form:"owe",origin:0,frequency:50,startWord:1,midWord:2,endWord:100},{phoneme:"əʊə",form:"oa",origin:4,frequency:10,startWord:1,midWord:0,endWord:100},{phoneme:"əʊə",form:"oa",origin:0,frequency:5,startWord:1,midWord:0,endWord:100}],to=["Germanic","French","Greek","Latin","Other"],re=[...Ze,...Je,...Ke,...Qe,...Xe,...eo,...oo,...no,...ro],$={onset:new Map,nucleus:new Map,coda:new Map},Q={onset:new Map,nucleus:new Map,coda:new Map};function io(e,o){switch(o){case"onset":return e.onset;case"nucleus":return e.nucleus;case"coda":return e.coda}}for(const e of["onset","nucleus","coda"])for(const o of re){const n=io(o,e);if(n===void 0||n>0){$[e].has(o.phoneme)||($[e].set(o.phoneme,[]),Q[e].set(o.phoneme,[]));const r=$[e].get(o.phoneme),t=Q[e].get(o.phoneme);r.push(o);const i=t.length>0?t[t.length-1]:0;t.push(i+o.frequency)}}const so=Object.freeze(Object.defineProperty({__proto__:null,ORIGINS:to,cumulativeFrequencies:Q,graphemeMaps:$,graphemes:re},Symbol.toStringTag,{value:"Module"})),ao=[["ŋ","p"],["ŋ","b"],["ŋ","t"],["ŋ","d"],["ŋ","f"],["ŋ","v"],["ŋ","θ"],["ŋ","ð"],["ŋ","s"],["ŋ","z"],["ŋ","ʃ"],["ŋ","ʒ"],["ŋ","tʃ"],["ŋ","dʒ"],["ŋ","m"],["ŋ","n"],["ŋ","l"],["ŋ","r"],["ŋ","j"],["ŋ","w"],["ŋ","h"],["ʒ","p"],["ʒ","b"],["ʒ","t"],["ʒ","d"],["ʒ","k"],["ʒ","g"],["ð","p"],["ð","b"],["ð","t"],["ð","d"],["ð","k"],["ð","g"],["h","p"],["h","b"],["h","t"],["h","d"],["h","k"],["h","g"],["p","b"],["b","p"],["t","d"],["d","t"],["k","g"],["g","k"],["m","k"],["m","g"],["n","p"],["n","b"]],lo={id:"en",name:"English",phonemes:F,phonemeMaps:P,graphemes:re,graphemeMaps:$,invalidClusters:{onset:[],coda:[],boundary:[]},sonorityHierarchy:{mannerOfArticulation:oe,placeOfArticulation:ne,voicedBonus:me,tenseBonus:We},syllableStructure:{maxOnsetLength:3,maxCodaLength:4,maxNucleusLength:1,syllableCountWeights:xe},generationWeights:{onsetLength:{monosyllabic:Le,followingNucleus:Me,default:_e},codaLength:{monosyllabic:Ee,monosyllabicDefault:Ie,polysyllabicNonzero:Ve,zeroWeightEndOfWord:Re,zeroWeightMidWord:Ne},probability:{hasOnsetStartOfWord:Te,hasOnsetAfterCoda:Ge,hasCodaMonosyllabic:Pe,hasCodaEndOfWord:$e,hasCodaMidWord:De,finalS:ze,boundaryDrop:je}},stress:{strategy:"weight-sensitive"},doubling:{enabled:!0,trigger:"lax-vowel",probability:80,maxPerWord:1,neverDouble:["v","w","j","h","ŋ","θ","ð","ʒ","k"],finalDoublingOnly:["f","s","l","z"],suppressAfterReduction:!0,suppressBeforeTense:!0,unstressedModifier:.5},spellingRules:[{name:"magic-e",pattern:"([aiouy])e([bcdfghjklmnpqrstvwxyz])$",replacement:"$1$2e",probability:98,scope:"syllable"},{name:"ks-to-x",pattern:"(?<!^)ks",replacement:"x",probability:25},{name:"hard-c-before-front-vowel",pattern:"c([eiy])",replacement:"k$1",probability:100,scope:"word"},{name:"no-final-v",pattern:"v$",replacement:"ve",probability:95,scope:"word"},{name:"no-final-j",pattern:"j$",replacement:"ge",probability:95,scope:"word"},{name:"no-final-i",pattern:"i$",replacement:"y",probability:95,scope:"word"},{name:"ngk-to-nk",pattern:"ng([kc])",replacement:"n$1",probability:100,scope:"word"}],clusterConstraint:{banned:ao,repair:"drop-coda"},codaConstraints:{allowedFinal:["p","b","t","d","k","g","f","v","s","z","ʃ","ʒ","tʃ","dʒ","m","n","ŋ","l","r","θ"],voicingAgreement:!0,homorganicNasalStop:!0},clusterLimits:{maxOnset:3,maxCoda:3,codaAppendants:["s","z"],onsetPrependers:["s"],attestedCodas:[["l","p"],["l","b"],["l","t"],["l","d"],["l","k"],["l","f"],["l","v"],["l","s"],["l","z"],["l","θ"],["l","ʃ"],["l","tʃ"],["l","dʒ"],["r","p"],["r","b"],["r","t"],["r","d"],["r","k"],["r","g"],["r","f"],["r","v"],["r","s"],["r","z"],["r","θ"],["r","ʃ"],["r","tʃ"],["r","dʒ"],["l","m"],["l","n"],["r","m"],["r","n"],["r","l"],["m","p"],["m","b"],["n","t"],["n","d"],["ŋ","k"],["m","f"],["m","s"],["m","z"],["m","θ"],["n","s"],["n","z"],["n","θ"],["ŋ","s"],["ŋ","z"],["ŋ","θ"],["n","tʃ"],["n","dʒ"],["p","s"],["b","z"],["t","s"],["d","z"],["k","s"],["g","z"],["f","s"],["v","z"],["θ","s"],["p","t"],["k","t"],["f","t"],["s","p"],["s","t"],["s","k"],["p","θ"],["f","θ"],["l","p","s"],["l","t","s"],["l","d","s"],["l","k","s"],["l","v","z"],["l","θ","s"],["l","p","t"],["l","f","θ"],["r","p","s"],["r","t","s"],["r","d","s"],["r","k","s"],["r","v","z"],["r","θ","s"],["m","p","s"],["n","t","s"],["n","d","s"],["ŋ","k","s"],["ŋ","k","θ"],["k","s","t"],["k","t","s"],["f","t","s"],["s","t","s"],["s","p","s"],["s","k","s"],["s","k","t"],["n","tʃ","t"],["n","dʒ","d"],["l","p","t","s"],["l","f","θ","s"],["ŋ","k","θ","s"],["k","s","t","s"]],attestedOnsets:[["p","l"],["p","r"],["b","l"],["b","r"],["t","r"],["d","r"],["k","l"],["k","r"],["g","l"],["g","r"],["f","l"],["f","r"],["θ","r"],["ʃ","r"],["t","w"],["d","w"],["k","w"],["s","w"],["s","l"],["s","m"],["s","n"],["s","p"],["s","t"],["s","k"],["s","p","l"],["s","p","r"],["s","t","r"],["s","k","r"],["s","k","w"]]},writtenFormConstraints:{maxConsonantGraphemes:4,consonantGraphemes:["tch","dge","ch","sh","th","ng","ph","wh","ck"],maxConsonantLetters:4},sonorityConstraints:{risingOnset:!0,fallingCoda:!0,minSonorityGap:0,exempt:["s","z"]},vowelReduction:{enabled:!0,rules:[{source:"ʌ",target:"ə",probability:85},{source:"ɛ",target:"ɪ",probability:70},{source:"e",target:"ɪ",probability:70},{source:"ɑ",target:"ə",probability:65},{source:"ɔ",target:"ə",probability:60},{source:"æ",target:"ə",probability:40},{source:"o",target:"ə",probability:55},{source:"ɜ",target:"ə",probability:75}],reduceSecondaryStress:!0,secondaryStressProbability:30,positionalModifiers:{wordInitial:.7,wordMedial:1,wordFinal:.5}}},co=(e,o)=>{const{word:n,syllableCount:r}=o,t=n.syllables[e];if(!(t.onset.length>0&&!t.onset[0].voiced&&t.onset[0].mannerOfArticulation==="stop"))return;let d=!1;if(e>0){const s=n.syllables[e-1];s.coda.length>0&&s.coda[s.coda.length-1].sound==="s"&&(d=y([[!0,5],[!1,95]]))}if(e===0?d=y([[!0,95],[!1,5]]):t.stress?d=y([[!0,90],[!1,10]]):e>0&&n.syllables[e-1].stress?d=y([[!0,50],[!1,50]]):e===r-1?t.coda.length===1&&!t.coda[0].voiced&&t.coda[0].mannerOfArticulation==="stop"?d=y([[!0,15],[!1,85]]):d=!1:d=y([[!0,30],[!1,70]]),d)if(e===r-1&&t.coda.length===1){const s={...t.coda[0],sound:t.coda[0].sound+"ʰ"};t.coda[0]=s}else{const s={...t.onset[0],sound:t.onset[0].sound+"ʰ"};t.onset[0]=s}},uo=e=>{fo(e),mo(e),Wo(e)},fo=e=>{const{word:o}=e,n=o.syllables,r=n.length;let t;if(r!==1){if(r===2)t=y([[0,70],[1,30]]);else{const i=ge(n[r-2]);t=y([[r-2,i?70:30],[r-3,i?20:60],[0,10]])}n[t].stress="ˈ"}},mo=e=>{const{word:o}=e,n=o.syllables,r=n.length;if(r===1)return;const t=n.findIndex(s=>s.stress==="ˈ"),i=[0,1,2].filter(s=>s!==t&&s<=r-1),d=y(i.map(s=>[s,ge(n[s])?70:30]));y([[!0,40],[!1,60]])&&(n[d].stress="ˌ")},Wo=e=>{const{word:o}=e,n=o.syllables;for(let r=1;r<n.length-1;r++)!n[r-1].stress&&!n[r].stress&&!n[r+1].stress&&y([[!0,40],[!1,60]])&&(n[r].stress="ˌ")},ge=e=>e.nucleus.length>1||e.coda.length>0,po=e=>{const{word:o}=e;let n="";o.syllables.forEach((r,t)=>{const i=r.onset.map(l=>l.sound).join(""),d=r.nucleus.map(l=>l.sound).join(""),s=r.coda.map(l=>l.sound).join("");let a=`${i}${d}${s}`;r.stress==="ˈ"?a=`ˈ${a}`:r.stress==="ˌ"?a=`ˌ${a}`:t>0&&(a=`.${a}`),n+=a}),o.pronunciation=n},ho=(e,o)=>{const{word:n}=e,r=n.syllables;if(r.length<=1)return;const t=new Map(o.rules.map(i=>[i.source,i]));for(let i=0;i<r.length;i++){const d=r[i];if(d.stress==="ˈ"||d.stress==="ˌ"&&!o.reduceSecondaryStress)continue;let s=1;o.positionalModifiers&&(i===0?s=o.positionalModifiers.wordInitial??1:i===r.length-1?s=o.positionalModifiers.wordFinal??1:s=o.positionalModifiers.wordMedial??1);for(let a=0;a<d.nucleus.length;a++){const l=d.nucleus[a];if(l.tense)continue;const c=t.get(l.sound);if(!c)continue;let m=c.probability*s;d.stress==="ˌ"&&o.secondaryStressProbability!=null&&(m=m*(o.secondaryStressProbability/100)),m=Math.min(100,Math.max(0,Math.round(m)));const f=F.find(h=>h.sound===c.target);f&&y([[!0,m],[!1,100-m]])&&(d.nucleus[a]={...f,reduced:!0})}}},go=(e,o)=>{const n=e.word.syllables;for(let r=0;r<n.length;r++)co(r,e);uo(e),o?.enabled&&ho(e,o),po(e)};function yo(e){return e.map(o=>({name:o.name,regex:new RegExp(o.pattern,o.flags??"g"),replacement:o.replacement,probability:o.probability??100,scope:o.scope??"both"}))}function se(e,o){let n=e;for(const{regex:r,replacement:t,probability:i}of o)r.lastIndex=0,i>=100?n=n.replace(r,t):n=n.replace(r,(d,...s)=>{if(D()()<i/100){let a=t;for(let l=0;l<s.length-2;l++)s[l]!==void 0&&(a=a.replace(`$${l+1}`,s[l]));return a}return d});return n}function bo(e){const o=new Map;o.set("lax-vowel",new Set),o.set("tense-vowel",new Set),o.set("front-vowel",new Set),o.set("vowel",new Set),o.set("consonant",new Set);for(const n of e)n.mannerOfArticulation==="highVowel"||n.mannerOfArticulation==="midVowel"||n.mannerOfArticulation==="lowVowel"?(o.get("vowel").add(n.sound),n.tense===!1&&o.get("lax-vowel").add(n.sound),n.tense===!0&&o.get("tense-vowel").add(n.sound),n.placeOfArticulation==="front"&&o.get("front-vowel").add(n.sound)):o.get("consonant").add(n.sound);return o}function B(e,o){const n=new Set;for(const r of e){const t=o.get(r);if(t)for(const i of t)n.add(i);else n.add(r)}return n}function Oo(e,o){const n=new Map;for(const r of e){if(!r.condition)continue;const t={};r.condition.leftContext&&(t.leftContext=B(r.condition.leftContext,o)),r.condition.rightContext&&(t.rightContext=B(r.condition.rightContext,o)),r.condition.notLeftContext&&(t.notLeftContext=B(r.condition.notLeftContext,o)),r.condition.notRightContext&&(t.notRightContext=B(r.condition.notRightContext,o)),r.condition.wordPosition&&(t.wordPosition=r.condition.wordPosition),n.set(r,t)}return n}function wo(e,o,n){return e[n].get(o)??[]}function vo(e,o,n,r,t,i,d){if(!e)return!0;if(e.wordPosition){let s=!1;const a=r,l=t,c=!a&&!l;for(const m of e.wordPosition)m==="initial"&&a&&(s=!0),m==="final"&&l&&(s=!0),m==="medial"&&c&&(s=!0);if(!s)return!1}return!(e.leftContext&&(!o||!e.leftContext.has(o.sound))||e.rightContext&&(!n||!e.rightContext.has(n.sound))||e.notLeftContext&&o&&e.notLeftContext.has(o.sound)||e.notRightContext&&n&&e.notRightContext.has(n.sound))}function qo(e,o,n,r,t,i,d,s){const a=e.filter(l=>vo(o.get(l),n,r,d,s));return a.length>0?a:e}function Ao(e,o,n,r){const t=e.filter(i=>(!o||!i.cluster||i.cluster>0)&&(!n||!i.startWord||i.startWord>0)&&(!r||!i.endWord||i.endWord>0)&&(!r&&!n||i.midWord>0));return t.length>0?t:e}function Co(e){if(e.length===0)return{phoneme:"",form:"",origin:0,frequency:0,startWord:0,midWord:0,endWord:0};if(e.length===1)return e[0];let o=0;const n=[];for(const i of e)o+=i.frequency,n.push(o);const r=n[n.length-1],t=D()()*r;for(let i=0;i<e.length;i++)if(t<n[i])return e[i];return e[e.length-1]}function So(e,o,n,r,t,i,d,s,a,l,c,m){if(!o||!o.enabled||!t||s||e.length!==1||d!=="onset"&&d!=="coda"||n.doublingCount>=o.maxPerWord)return e;if(o.trigger==="lax-vowel"){const O=t.nucleus!=null&&t.nucleus>0,q=t.tense===!1;if(!O||!q)return e}if(m.has(r.sound)||a&&o.finalDoublingOnly&&o.finalDoublingOnly.length>0&&!o.finalDoublingOnly.includes(r.sound)||o.suppressAfterReduction&&c||o.suppressBeforeTense&&i&&i.tense===!0)return e;let f=o.probability;return o.unstressedModifier!=null&&!l&&(f*=o.unstressedModifier),f=Math.min(100,Math.max(0,Math.round(f))),f<=0?e:y([[!0,f],[!1,100-f]])?(n.doublingCount++,e+e):e}const ye=new Set(["a","e","i","o","u","y"]);function ae(e){return!ye.has(e.toLowerCase())}const te=["tch","dge","ch","sh","th","ng","ph","wh","ck"];function X(e,o=te){const n=[];let r=0;for(;r<e.length;){let t=!1;for(const i of o)if(e.startsWith(i,r)){n.push(i),r+=i.length,t=!0;break}t||(n.push(e[r]),r++)}return n}function U(e){for(const o of e)if(ye.has(o.toLowerCase()))return!1;return!0}function le(e,o,n,r){const t=r??te;for(let i=0;i<10;i++){let d=function(u){for(let b=0;b<x.length;b++)if(u<x[b])return b;return x.length-1};const s=e.join(""),a=X(s,t);let l=-1,c=0,m=!1,f=-1,h=0;for(let u=0;u<=a.length;u++)if(u<a.length&&U(a[u]))l<0&&(l=u),c=u-l+1;else{if(c>n){m=!0,f=l,h=c;break}l=-1,c=0}if(!m)return;const O=[];let q=0;for(const u of a)O.push(q),q+=u.length;const k=O[f],C=f+h<a.length?O[f+h]:s.length,x=[];let W=0;for(const u of e)W+=u.length,x.push(W);const g=d(k),w=d(C-1),p=h-n;if(g===w){const u=g>0?x[g-1]:0,b=a.slice(f,f+h),_=b.slice(1,-1),v=Math.floor(_.length/2),A=[];for(let S=0;S<=_.length;S++)v+S<_.length&&A.push(v+S),S>0&&v-S>=0&&A.push(v-S);const Z=new Set;for(const S of A){if(Z.size>=p)break;Z.add(S)}const J=[b[0]];for(let S=0;S<_.length;S++)Z.has(S)||J.push(_[S]);J.push(b[b.length-1]);const be=k-u,Oe=C-u,de=e[g];e[g]=de.slice(0,be)+J.join("")+de.slice(Oe),o[g*2]=e[g];continue}const L=x[g];let N=0;for(let u=f;u<f+h&&O[u]<L;u++)N++;const R=h-N,z=N>=R,V=z?g:w,Y=e[V],E=X(Y,t);let I=[];if(z)for(let u=E.length-1;u>=0&&U(E[u]);u--)I.unshift({tokenIdx:u,token:E[u]});else for(let u=0;u<E.length&&U(E[u]);u++)I.push({tokenIdx:u,token:E[u]});const M=new Set;if(I.length>2){const u=I.slice(1,-1),b=Math.floor(u.length/2),_=[];for(let v=0;v<=u.length;v++)b+v<u.length&&_.push(u[b+v]),v>0&&b-v>=0&&_.push(u[b-v]);for(const v of _){if(M.size>=p)break;M.add(v.tokenIdx)}}if(M.size<p){const u=z?I:[...I].reverse();for(const b of u){if(M.size>=p)break;M.has(b.tokenIdx)||M.add(b.tokenIdx)}}const H=E.filter((u,b)=>!M.has(b)).join("");e[V]=H,o[V*2]=H}}function j(e){const o=e.mannerOfArticulation;return o==="sibilant"?"fricative":o==="lateralApproximant"?"liquid":o}function ko(e){const o=e.placeOfArticulation;return o==="alveolar"||o==="postalveolar"||o==="dental"}function T(e){const o=e.placeOfArticulation;return o==="bilabial"||o==="labiodental"||o==="labial-velar"?"labial":o==="dental"||o==="alveolar"||o==="postalveolar"?"coronal":o==="palatal"||o==="velar"?"dorsal":o}function xo(e,o,n){return e.sound===o.sound||j(e)===j(o)&&T(e)===T(o)?!1:!!(e.sound==="s"||o.sound==="s"&&n.length>=2&&["t","p","k"].includes(n[1]?.sound)||n.length>=2&&n[0].sound==="s"&&["t","p","k"].includes(n[1].sound)||ko(o)||j(e)==="nasal"&&j(o)==="stop"&&T(e)===T(o)||j(e)!==j(o)||T(e)!==T(o))}function Lo(e,o,n,r){const t=r??te;for(let i=0;i<n.length;i++){const{codaFinal:d,onsetInitial:s,onsetCluster:a}=n[i];if(!(!d||!s)&&!xo(d,s,a)){const l=e[i];if(!l)continue;const c=X(l,t);let m=-1;for(let f=c.length-1;f>=0;f--)if(U(c[f])){m=f;break}if(m<0)continue;c.splice(m,1),e[i]=c.join(""),o[i*2]=e[i]}}}function Mo(e,o,n){for(let r=0;r<10;r++){let t=function(p){for(let L=0;L<m.length;L++)if(p<m[L])return L;return m.length-1};const i=e.join("");let d=-1,s=0,a=!1,l=-1,c=0;for(let p=0;p<=i.length;p++)if(p<i.length&&ae(i[p]))d<0&&(d=p),s=p-d+1;else{if(s>n){a=!0,l=d,c=s;break}d=-1,s=0}if(!a)return;const m=[];let f=0;for(const p of e)f+=p.length,m.push(f);const h=t(l),O=t(l+c-1),q=h<O?m[h]:-1;let k;if(q<0)k=h;else{const p=q-l,L=c-p;k=p>=L?h:O}const C=e[k],x=k>0?m[k-1]:0,W=[];for(let p=0;p<C.length;p++){const L=x+p;L>=l&&L<l+c&&ae(C[p])&&W.push(p)}if(W.length<=1)return;const g=W.slice(1,-1),w=g.length>0?g[Math.floor(g.length/2)]:W[Math.floor(W.length/2)];e[k]=C.slice(0,w)+C.slice(w+1),o[k*2]=e[k]}}function _o(e){const o=e.graphemeMaps,n=e.doubling,r=yo(e.spellingRules??[]),t=r.filter(l=>l.scope==="syllable"||l.scope==="both"),i=r.filter(l=>l.scope==="word"||l.scope==="both"),d=bo(e.phonemes),s=new Set(n?.neverDouble??[]),a=Oo(e.graphemes,d);return l=>{const{syllables:c,written:m}=l.word,f=c.flatMap((W,g)=>["onset","nucleus","coda"].flatMap(w=>W[w].map(p=>({phoneme:p,syllableIndex:g,position:w,stress:W.stress})))),h=[],O=[];let q=[];const k={doublingCount:0};for(let W=0;W<f.length;W++){const{phoneme:g,syllableIndex:w,position:p,stress:L}=f[W],N=f[W-1],R=f[W+1],z=N?.syllableIndex===w&&N?.position===p||R?.syllableIndex===w&&R?.position===p,V=N?.phoneme,Y=V?.reduced??!1;let E;for(let A=W+1;A<f.length;A++)if(f[A].position==="nucleus"){E=f[A].phoneme;break}const I=W===0,M=W===f.length-1,H=wo(o,g.sound,p),u=qo(H,a,V,R?.phoneme,W,f.length,I,M),b=Ao(u,z,I,M),_=Co(b),v=So(_.form,n,k,g,V,E,p,z,M,L,Y,s);if(q.length>0&&v.length>0&&q[q.length-1].slice(-1)===v[0]?q.push(v.slice(1)):q.push(v),!R||R.syllableIndex!==w){let A=se(q.join(""),t);h.length>0&&A.length>0&&h[h.length-1].slice(-1)===A[0]&&(A=A.slice(1)),h.push(A),O.push(A),R&&O.push("&shy;"),q=[]}}for(let W=0;W<h.length-1;W++){const g=h[W],w=h[W+1];g.length>0&&w.length>0&&g[g.length-1]==="g"&&c[W].coda.length>0&&c[W].coda[c[W].coda.length-1].sound==="g"&&/^[eiy]/i.test(w)&&(h[W]=g+"u",O[W*2]=O[W*2]+"u")}const C=e.writtenFormConstraints,x=C?.maxConsonantGraphemes;if(x&&le(h,O,x,C?.consonantGraphemes),c.length>1){const W=[];for(let g=0;g<c.length-1;g++){const w=c[g].coda,p=c[g+1].onset;W.push({codaFinal:w.length>0?w[w.length-1]:void 0,onsetInitial:p.length>0?p[0]:void 0,onsetCluster:p})}Lo(h,O,W,C?.consonantGraphemes),x&&le(h,O,x,C?.consonantGraphemes)}C?.maxConsonantLetters&&Mo(h,O,C.maxConsonantLetters),m.clean=se(h.join(""),i),m.hyphenated=O.join("")}}function Eo(e,o,n){for(let r=0;r<e.length-1;r++){const t=e[r].coda,i=e[r+1].onset;if(!(t.length===0||i.length===0))for(;t.length>0&&i.length>0&&o.has(`${t[t.length-1].sound}|${i[0].sound}`);)n==="drop-coda"?t.pop():i.shift()}}function Io(e,o){if(e.length===0)return;const r=e[e.length-1].coda;if(r.length!==0)for(;r.length>0&&!o.has(r[r.length-1].sound);)r.pop()}const Ro={bilabial:["m","p","b"],alveolar:["n","t","d"],velar:["ŋ","k","g"]};function ce(e){for(const[o,n]of Object.entries(Ro))if(n.includes(e))return o}const No=new Set(["stop","fricative","affricate","sibilant"]);function ue(e){return No.has(e.mannerOfArticulation)}function Vo(e){return e.mannerOfArticulation==="nasal"}function zo(e){return e.mannerOfArticulation==="stop"}function jo(e,o){for(const n of e){if(o.clusterLimits&&n.onset.length>o.clusterLimits.maxOnset&&n.onset.splice(0,n.onset.length-o.clusterLimits.maxOnset),o.clusterLimits&&n.coda.length>0){const r=o.clusterLimits,t=n.coda[n.coda.length-1].sound,i=o.codaAppendantSet?.has(t)?r.maxCoda+1:r.maxCoda;for(;n.coda.length>i;)n.coda.shift()}o.codaConstraints?.voicingAgreement&&n.coda.length>=2&&To(n.coda),o.codaConstraints?.homorganicNasalStop&&n.coda.length>=2&&Go(n.coda)}}function To(e){let o=-1;for(let r=e.length-1;r>=0;r--)if(ue(e[r])){o=r;break}if(o<0)return;const n=e[o].voiced;for(let r=e.length-2;r>=0;r--)ue(e[r])&&e[r].voiced!==n&&e.splice(r,1)}function Go(e){for(let o=e.length-2;o>=0;o--)if(Vo(e[o])&&zo(e[o+1])){const n=ce(e[o].sound),r=ce(e[o+1].sound);n&&r&&n!==r&&e.splice(o,1)}}function Po(e){Se(e);const o=ke(e),n={onset:Array.from(e.phonemeMaps.onset.values()).flat(),coda:Array.from(e.phonemeMaps.coda.values()).flat(),nucleus:Array.from(e.phonemeMaps.nucleus.values()).flat()},r=c=>c.length>0?new RegExp(c.join("|"),"i"):null,t={onset:r(e.invalidClusters.onset),coda:r(e.invalidClusters.coda),nucleus:r(e.invalidClusters.boundary)},i=_o(e),d=e.clusterConstraint?.banned?new Set(e.clusterConstraint.banned.map(([c,m])=>`${c}|${m}`)):void 0,s=new Map;for(const[c,m]of o)s.set(c.sound,m);const a=e.clusterLimits,l=e.sonorityConstraints;return{config:e,sonorityLevels:o,sonorityBySound:s,positionPhonemes:n,invalidClusterRegexes:t,generateWrittenForm:i,bannedSet:d,clusterRepair:e.clusterConstraint?.repair,allowedFinalSet:e.codaConstraints?.allowedFinal?new Set(e.codaConstraints.allowedFinal):void 0,clusterLimits:a,sonorityConstraints:l,codaAppendantSet:a?.codaAppendants?new Set(a.codaAppendants):void 0,onsetPrependerSet:a?.onsetPrependers?new Set(a.onsetPrependers):void 0,sonorityExemptSet:l?.exempt?new Set(l.exempt):void 0,attestedOnsetSet:a?.attestedOnsets?new Set(a.attestedOnsets.map(c=>c.join("|"))):void 0,attestedCodaSet:a?.attestedCodas?new Set(a.attestedCodas.map(c=>c.join("|"))):void 0}}function G(e,o){return e.sonorityLevels.get(o)??0}function ie(e,o){const n=e.positionPhonemes[o.position];for(;o.cluster.length<o.maxLength;){const r=$o(n,e,o);if(r.length===0)break;const t=Yo(r,o);if(!t||(o.cluster.push(t),Zo(o,e)))break}return o.cluster}function $o(e,o,n){return e.filter(r=>Do(r,o,n))}function Do(e,o,n){if(n.ignore.includes(e.sound)||n.cluster.some(t=>t.sound===e.sound)||!Fo(e,n))return!1;if(n.position==="onset"&&o.attestedOnsetSet&&n.cluster.length>0){const t=[...n.cluster.map(i=>i.sound),e.sound].join("|");return o.attestedOnsetSet.has(t)?!0:Array.from(o.attestedOnsetSet).some(i=>i.startsWith(t+"|"))}if(n.position==="coda"&&o.attestedCodaSet&&n.cluster.length>0){const t=[...n.cluster.map(i=>i.sound),e.sound].join("|");return o.attestedCodaSet.has(t)?!0:Array.from(o.attestedCodaSet).some(i=>i.startsWith(t+"|"))}if(!Ho(e,o,n))return!1;const r=o.invalidClusterRegexes[n.position];if(r){const t=n.cluster.map(i=>i.sound).join("")+e.sound;if(r.test(t))return!1}return!0}function Fo(e,{position:o,isStartOfWord:n,isEndOfWord:r}){const t=we(e,o);return(t===void 0||t>0)&&(!n||e.startWord===void 0||e.startWord>0)&&(!r||e.endWord===void 0||e.endWord>0)}function Ho(e,o,{cluster:n,position:r}){const t=n[n.length-1];switch(r){case"onset":return Bo(e,o,n,t);case"coda":return Uo(e,o,t);case"nucleus":return!0;default:return!1}}function Bo(e,o,n,r){if(n.length===0||n.length===1&&n[0].sound==="s"&&["t","p","k"].includes(e.sound))return!0;if(e.placeOfArticulation===r?.placeOfArticulation)return!1;const i=r&&["stop"].includes(r.mannerOfArticulation),d=i?["glide","liquid"].includes(e.mannerOfArticulation):!1;return i?d:G(o,e)>G(o,r)}function Uo(e,o,n){if(!n)return!0;const r=G(o,n),t=G(o,e),i=n.mannerOfArticulation,d=e.mannerOfArticulation,s=i=="fricative"&&d=="fricative"||i=="stop"&&d=="stop",a=i=="stop"&&d=="fricative"||i=="stop"&&d=="sibilant"||i=="nasal"&&d==="sibilant";return s||a||t<r}function Yo(e,{position:o,isStartOfWord:n,isEndOfWord:r}){const t=e.map(i=>{const d=i[o]??0,s=n&&i.startWord||r&&i.endWord||i.midWord||1;return[i,d*s]});return y(t)}function Zo(e,o){const{position:n,cluster:r}=e;if(o.clusterLimits){const t=o.clusterLimits;if(n==="onset"&&r.length>=t.maxOnset)return!0;if(n==="coda"){const i=o.codaAppendantSet&&r.length>0&&o.codaAppendantSet.has(r[r.length-1].sound)?t.maxCoda+1:t.maxCoda;if(r.length>=i)return!0}}if(n==="onset"&&o.attestedOnsetSet&&r.length>=2){const t=r.map(i=>i.sound).join("|");if(o.attestedOnsetSet.has(t)&&!Array.from(o.attestedOnsetSet).some(d=>d.startsWith(t+"|")))return!0}if(n==="coda"&&o.attestedCodaSet&&r.length>=2){const t=r.map(i=>i.sound).join("|");if(o.attestedCodaSet.has(t)&&!Array.from(o.attestedCodaSet).some(d=>d.startsWith(t+"|")))return!0}return!!(n==="onset"&&r.length===2&&["liquid","nasal"].includes(r[1].mannerOfArticulation))}function Jo(e,o,n,r){const t=o.word.syllables[o.currSyllableIndex-1],i=t&&t.coda.length===0;o.syllableCount;const{onsetLength:d}=e.config.generationWeights,s=y(r?d.monosyllabic:i?d.followingNucleus:d.default);if(s===0)return[];const a=t?t.coda.map(l=>l.sound):[];return ie(e,{position:"onset",cluster:[],ignore:a,isStartOfWord:n,isEndOfWord:!1,maxLength:s})}function Ko(e,o,n,r){return ie(e,{position:"nucleus",cluster:[],ignore:[],isStartOfWord:n,isEndOfWord:r,maxLength:1,syllableCount:o.syllableCount})}function Qo(e,o,n,r,t){o.syllableCount;const i=n.onset.length,{codaLength:d,probability:s}=e.config.generationWeights,a=t?d.monosyllabic[i]??d.monosyllabicDefault:[[0,r?d.zeroWeightEndOfWord:d.zeroWeightMidWord],...d.polysyllabicNonzero],l=y(a);if(l===0)return[];const c=ie(e,{position:"coda",cluster:[],ignore:[],isStartOfWord:!1,isEndOfWord:r,maxLength:l});if(r&&y([[!0,s.finalS],[!1,100-s.finalS]])){const m=e.config.phonemes.find(f=>f.sound==="s");m&&c.push(m)}return c}function Xo(e,o,n){const r=o.coda.at(-1),t=n.onset[0];if(!r||!t)return[o,n];const i=G(e,r),d=G(e,t),{boundaryDrop:s}=e.config.generationWeights.probability;return d===i&&y([[!0,s],[!1,100-s]])&&o.coda.pop(),[o,n]}function en(e,o){const n=o.currSyllableIndex===o.syllableCount-1,r=o.currSyllableIndex===0,t=o.word.syllables[o.currSyllableIndex-1],d=o.syllableCount===1,s={onset:[],nucleus:[],coda:[]},{probability:a}=e.config.generationWeights,l=on(a,r,t),c=nn(a,n,d);return l&&(s.onset=Jo(e,o,r,d)),s.nucleus=Ko(e,o,r,n),c&&(s.coda=Qo(e,o,s,n,d)),s}function on(e,o,n){return o?y([[!0,e.hasOnsetStartOfWord],[!1,100-e.hasOnsetStartOfWord]]):n&&n.coda.length>0?y([[!0,e.hasOnsetAfterCoda],[!1,100-e.hasOnsetAfterCoda]]):!0}function nn(e,o,n){return y(n?[[!0,e.hasCodaMonosyllabic],[!1,100-e.hasCodaMonosyllabic]]:o?[[!0,e.hasCodaEndOfWord],[!1,100-e.hasCodaEndOfWord]]:[[!0,e.hasCodaMidWord],[!1,100-e.hasCodaMidWord]])}function rn(e,o){o.syllableCount||(o.syllableCount=y(e.config.syllableStructure.syllableCountWeights));const n=new Array(o.syllableCount);let r;for(let t=0;t<o.syllableCount;t++){let i=en(e,o);r&&([r,i]=Xo(e,r,i)),n[t]=i,r=i,o.currSyllableIndex++}o.word.syllables=n}function tn(e,o){rn(e,o),e.bannedSet&&Eo(o.word.syllables,e.bannedSet,e.clusterRepair),e.allowedFinalSet&&Io(o.word.syllables,e.allowedFinalSet),(e.clusterLimits||e.config.codaConstraints?.voicingAgreement||e.config.codaConstraints?.homorganicNasalStop)&&jo(o.word.syllables,{clusterLimits:e.clusterLimits,sonorityConstraints:e.sonorityConstraints,codaConstraints:e.config.codaConstraints,sonorityBySound:e.sonorityBySound,codaAppendantSet:e.codaAppendantSet,sonorityExemptSet:e.sonorityExemptSet}),e.generateWrittenForm(o),go(o,e.config.vowelReduction)}const dn=Po(lo),sn=(e={})=>{const o=D(),n={word:{syllables:[],pronunciation:"",written:{clean:"",hyphenated:""}},syllableCount:e.syllableCount||0,currSyllableIndex:0};e.seed!==void 0&&K(Ce(e.seed));try{return tn(dn,n),n.word}finally{K(o)}},an={generateWord:sn,random:Ae,phonemes:Ye,graphemes:so};self.unglish=an;
